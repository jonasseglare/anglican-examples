;; gorilla-repl.fileformat = 1

;; **
;;; # Random Walks: Problems With Importance Sampling
;; **

;; @@
(ns random-walks
  (:use [anglican core runtime emit stat])
  (:require [clojure.core.matrix :as mat]
            [gorilla-plot.core :as plot]))

;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-nil'>nil</span>","value":"nil"}
;; <=

;; **
;;; In this worksheet, we go through an interactive example of why importance sampling (IS), probably the simplest inference algorithm, fails to performing inference for sufficiently complex models - specifically, for most models that are not very low-dimensional. We introduce sequential Monte Carlo (SMC) as an inference algorithm that, while not perfect, performs much better than IS for higher-dimensional models.
;; **

;; **
;;; We begin with the following model, which I'll refer to as the **uniform random walk**:
;;;  
;;; $$ z\_0 \sim U(-2, 2) $$
;;; 
;;; $$ z\_t | z\_{t-1} \sim U(z\_{t-1}-2, z\_{t-1} + 2) $$
;;; 
;;; In this model, the sequence of random variables @@ (z\_0, ..., z\_{T-1}) @@ starts at a uniform random number between -2 and 2, and each timestep @@ t \in \\{1, ..., T\\} @@, it jumps upwards or downwards by a uniformly random amount between -2 and 2.
;;; 
;;; We represent this process in Anglican with the following query:
;; **

;; @@
(defquery uniform-rw [T]
  (loop [t 1
         z [(sample (uniform-continuous -2 2))]]
    (if (= t T)
      z
            
      (recur (+ t 1)
             (conj z (sample 
                       (uniform-continuous (- (last z) 2) (+ (last z) 2))))))))
;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-var'>#&#x27;degeneracy/uniform-rw</span>","value":"#'degeneracy/uniform-rw"}
;; <=

;; **
;;; To get a feel for what the trajectories generated by this process actually look like, let's look at a few samples:
;; **

;; @@
(def T 10)

(def is-results (take 25 (doquery :importance uniform-rw [T])))

(def samples (map :result is-results))

(def color-dist
  (let [colors (list "green" "red" "blue" "purple" "pink" "yellow" "black" "brown")]
    (categorical
      (partition 2 (interleave colors (repeat (count colors) 1))))))

(apply plot/compose 
       (map
         (fn [path] (plot/list-plot path :joined :true :plot-range [[0 (- T 1)] [-10 10]]
                                    :color (sample* color-dist)))
         samples))
;; @@
;; =>
;;; {"type":"list-like","open":"","close":"","separator":"</pre><pre>","items":[{"type":"list-like","open":"","close":"","separator":"</pre><pre>","items":[{"type":"list-like","open":"","close":"","separator":"</pre><pre>","items":[{"type":"list-like","open":"","close":"","separator":"</pre><pre>","items":[{"type":"html","content":"<span class='clj-var'>#&#x27;degeneracy/T</span>","value":"#'degeneracy/T"},{"type":"html","content":"<span class='clj-var'>#&#x27;degeneracy/is-results</span>","value":"#'degeneracy/is-results"}],"value":"[#'degeneracy/T,#'degeneracy/is-results]"},{"type":"html","content":"<span class='clj-var'>#&#x27;degeneracy/samples</span>","value":"#'degeneracy/samples"}],"value":"[[#'degeneracy/T,#'degeneracy/is-results],#'degeneracy/samples]"},{"type":"html","content":"<span class='clj-var'>#&#x27;degeneracy/color-dist</span>","value":"#'degeneracy/color-dist"}],"value":"[[[#'degeneracy/T,#'degeneracy/is-results],#'degeneracy/samples],#'degeneracy/color-dist]"},{"type":"vega","content":{"width":400,"height":247.2187957763672,"padding":{"top":10,"left":55,"bottom":40,"right":10},"scales":[{"name":"x","type":"linear","range":"width","zero":false,"domain":[0,9]},{"name":"y","type":"linear","range":"height","nice":true,"zero":false,"domain":[-10,10]}],"axes":[{"type":"x","scale":"x"},{"type":"y","scale":"y"}],"data":[{"name":"2f0252e4-b6fb-4351-a3f4-1cea575ddda9","values":[{"x":0,"y":-0.39901273345316834},{"x":1,"y":-1.754862237200335},{"x":2,"y":-1.2299846485415333},{"x":3,"y":-2.9735084892368135},{"x":4,"y":-3.9381959046328765},{"x":5,"y":-4.078505261588908},{"x":6,"y":-5.175221781063404},{"x":7,"y":-6.370083609952889},{"x":8,"y":-7.411701030389484},{"x":9,"y":-6.8566537652128545}]},{"name":"c2944015-ee97-4dd4-b602-2895e1c9397a","values":[{"x":0,"y":-0.11939723351650411},{"x":1,"y":-1.3003557012317382},{"x":2,"y":0.24000620249119814},{"x":3,"y":0.7324131762974471},{"x":4,"y":2.556748467248582},{"x":5,"y":1.4661216043818408},{"x":6,"y":0.4103484635982512},{"x":7,"y":-0.6627104116427924},{"x":8,"y":-2.063325838835441},{"x":9,"y":-3.87306668807902}]},{"name":"d52ddf5f-f92f-43a2-b103-e09dbea70426","values":[{"x":0,"y":-1.717099777403293},{"x":1,"y":0.16452282703006915},{"x":2,"y":-0.35776365782616815},{"x":3,"y":-1.4906710812505901},{"x":4,"y":-0.9819577399953118},{"x":5,"y":-2.196584944255572},{"x":6,"y":-0.3640351108906055},{"x":7,"y":0.18457650890374833},{"x":8,"y":-0.1439009451826968},{"x":9,"y":1.4533261844477297}]},{"name":"3e11ec77-0c35-4660-9f36-1216695aba2e","values":[{"x":0,"y":1.7235646235331812},{"x":1,"y":1.965203690463847},{"x":2,"y":1.1905377314579015},{"x":3,"y":2.219618506424478},{"x":4,"y":1.3372613900622792},{"x":5,"y":2.8087473670010112},{"x":6,"y":3.1249252914862833},{"x":7,"y":1.840860166684366},{"x":8,"y":0.8499951875712242},{"x":9,"y":1.694772014748998}]},{"name":"3dbae370-02fa-45b5-9890-21689a932f49","values":[{"x":0,"y":-0.14898283170382864},{"x":1,"y":-0.7191471642482901},{"x":2,"y":-1.8587707254975614},{"x":3,"y":-1.8375137170665843},{"x":4,"y":-1.7826832312544028},{"x":5,"y":-0.8866556852754117},{"x":6,"y":1.0467285458611801},{"x":7,"y":1.3550231525165284},{"x":8,"y":2.32336369000474},{"x":9,"y":1.6556382806630525}]},{"name":"f9c1ab4a-ab9b-4f0d-9d5b-7a448fb0a3fb","values":[{"x":0,"y":1.5255873150755281},{"x":1,"y":0.04845435448127944},{"x":2,"y":-0.8563712993634381},{"x":3,"y":0.4834312053016765},{"x":4,"y":-0.20744153339013305},{"x":5,"y":-0.961137482139171},{"x":6,"y":0.903275842354958},{"x":7,"y":0.7750317004974114},{"x":8,"y":-0.5005820707677611},{"x":9,"y":1.13950490373493}]},{"name":"e2e3f019-9826-4ca7-9416-c7b373136a07","values":[{"x":0,"y":1.1674662378658551},{"x":1,"y":2.900574415540312},{"x":2,"y":4.069579255295892},{"x":3,"y":6.045709409702286},{"x":4,"y":7.770723716367489},{"x":5,"y":7.289233073971907},{"x":6,"y":6.1699338662702},{"x":7,"y":6.523337011786046},{"x":8,"y":6.935577306852811},{"x":9,"y":8.456348027013874}]},{"name":"66084c2e-4ec7-4340-8cd3-08b3fc87beab","values":[{"x":0,"y":-0.40642864056794537},{"x":1,"y":-1.472852658498879},{"x":2,"y":-2.1979416642622427},{"x":3,"y":-3.366321784138849},{"x":4,"y":-3.8078293883433885},{"x":5,"y":-5.238584782679306},{"x":6,"y":-7.030958985618994},{"x":7,"y":-7.166383342889825},{"x":8,"y":-7.73689015331548},{"x":9,"y":-9.183155246836163}]},{"name":"60e55515-0993-4d88-9bb0-8a4fa3b1bf8b","values":[{"x":0,"y":1.3175979494913292},{"x":1,"y":1.9668117312179483},{"x":2,"y":0.34877603106445054},{"x":3,"y":-0.5313594270385664},{"x":4,"y":-1.2052602141080984},{"x":5,"y":-0.33207188186120007},{"x":6,"y":0.79902691632459},{"x":7,"y":2.231051571887101},{"x":8,"y":2.594170268949183},{"x":9,"y":1.7169304918508228}]},{"name":"0910c07b-6143-4eb2-9791-df5fc1bc7f27","values":[{"x":0,"y":-0.03255516131624425},{"x":1,"y":1.2151175278424367},{"x":2,"y":1.5850732063389348},{"x":3,"y":2.8908656310737193},{"x":4,"y":2.0710299855036904},{"x":5,"y":0.3650648483472745},{"x":6,"y":1.9010720542579786},{"x":7,"y":1.1692652412114164},{"x":8,"y":2.0188479013792655},{"x":9,"y":2.8085137377326257}]},{"name":"0f6392de-05d3-43b9-9c22-a32cce6a4749","values":[{"x":0,"y":0.9686820091621096},{"x":1,"y":0.6580267330346787},{"x":2,"y":2.4093191946530483},{"x":3,"y":3.1554722105609194},{"x":4,"y":2.16276676052893},{"x":5,"y":0.6534378337892726},{"x":6,"y":0.15227277041973153},{"x":7,"y":-0.5646608776496765},{"x":8,"y":-1.9125849198285874},{"x":9,"y":-2.2819799463970414}]},{"name":"9b6c95b1-7972-4512-aeab-ba8ea54e0b1c","values":[{"x":0,"y":1.5855019660453964},{"x":1,"y":2.2814648344345896},{"x":2,"y":3.2667780185078223},{"x":3,"y":3.0264779844020904},{"x":4,"y":2.317790671409611},{"x":5,"y":2.6168483445249313},{"x":6,"y":4.467210142578543},{"x":7,"y":3.940377407037264},{"x":8,"y":4.282009164735352},{"x":9,"y":4.483420382550524}]},{"name":"8e3c94d7-3835-4735-90cd-579019f8972a","values":[{"x":0,"y":-0.7361575336374857},{"x":1,"y":-0.013142644867232711},{"x":2,"y":0.010951428493522819},{"x":3,"y":-0.7627644727299465},{"x":4,"y":-2.7199337477033483},{"x":5,"y":-2.0554334004716948},{"x":6,"y":-1.6248679558088677},{"x":7,"y":-3.312004960840744},{"x":8,"y":-1.490418862624403},{"x":9,"y":-0.2632938400494495}]},{"name":"c575166f-f990-4652-b164-1c184b501a7b","values":[{"x":0,"y":0.850766993513747},{"x":1,"y":1.9351281105474867},{"x":2,"y":0.8876662038950018},{"x":3,"y":2.615198681427083},{"x":4,"y":1.8438786126224977},{"x":5,"y":1.4197334619819095},{"x":6,"y":1.4478582892286012},{"x":7,"y":3.085984152704274},{"x":8,"y":2.819594361964513},{"x":9,"y":2.093014913523483}]},{"name":"3d601430-84bc-492b-b85f-cb7cc3d292fc","values":[{"x":0,"y":1.081361566878556},{"x":1,"y":3.053294916498886},{"x":2,"y":2.3894426213673707},{"x":3,"y":2.93403357229243},{"x":4,"y":3.3911278649824395},{"x":5,"y":4.001705778194514},{"x":6,"y":4.04789429257488},{"x":7,"y":2.140910708318498},{"x":8,"y":2.346585214560374},{"x":9,"y":2.897062565460267}]},{"name":"7cfbf3b7-0b98-4356-af63-f1b9f2bcfca6","values":[{"x":0,"y":1.4952357875972648},{"x":1,"y":3.2073276153684684},{"x":2,"y":1.6393575476360915},{"x":3,"y":3.130331000857769},{"x":4,"y":4.588735338679788},{"x":5,"y":5.878563152835455},{"x":6,"y":7.805396892747015},{"x":7,"y":8.593712173191626},{"x":8,"y":7.99758795082672},{"x":9,"y":6.456423169913544}]},{"name":"275df9d6-acfc-486f-9df3-01570510b1f4","values":[{"x":0,"y":1.9630189200773938},{"x":1,"y":2.4390320420457465},{"x":2,"y":4.2959088690173575},{"x":3,"y":2.945395026574465},{"x":4,"y":3.7153716621025197},{"x":5,"y":2.094542964849217},{"x":6,"y":2.404812403909708},{"x":7,"y":3.0953718731292055},{"x":8,"y":3.6872358548722133},{"x":9,"y":1.7371978414684408}]},{"name":"a9a57663-6c1c-445c-9d53-84f1083794c0","values":[{"x":0,"y":-0.31223037194954273},{"x":1,"y":1.4141550249744466},{"x":2,"y":3.2093638868610164},{"x":3,"y":3.440146520874115},{"x":4,"y":2.6711555788576637},{"x":5,"y":4.074741582119338},{"x":6,"y":5.975065689178046},{"x":7,"y":5.845202421586223},{"x":8,"y":4.058393147649932},{"x":9,"y":4.71361228390507}]},{"name":"e524bd56-6f43-4878-aa24-cf0ca7a3d17e","values":[{"x":0,"y":-0.42911307291601375},{"x":1,"y":1.1637488275166845},{"x":2,"y":1.656562336152673},{"x":3,"y":-0.07143201841100844},{"x":4,"y":1.5548899478036198},{"x":5,"y":1.049155481705986},{"x":6,"y":-0.5760424660622148},{"x":7,"y":-1.8681874789693511},{"x":8,"y":-1.5564232217714888},{"x":9,"y":-2.514090607731334}]},{"name":"0f4bc174-2a05-493b-8621-d06cfa2b0414","values":[{"x":0,"y":-0.39993547230771576},{"x":1,"y":-1.2227627066698705},{"x":2,"y":-1.7203057146818725},{"x":3,"y":0.16637534465336049},{"x":4,"y":2.029676871857914},{"x":5,"y":0.4197460464921141},{"x":6,"y":1.8649207664908152},{"x":7,"y":1.1243317927095893},{"x":8,"y":1.5218134250161643},{"x":9,"y":2.282144281472971}]},{"name":"ebc9138d-e734-4153-ab0c-d5b33d4e0a8d","values":[{"x":0,"y":1.1460782324723908},{"x":1,"y":2.697391860605614},{"x":2,"y":1.7765088431038887},{"x":3,"y":0.8501579950417621},{"x":4,"y":1.8418248563672706},{"x":5,"y":0.05208324855457677},{"x":6,"y":1.813924370415278},{"x":7,"y":0.9464368649712869},{"x":8,"y":1.5902114177663238},{"x":9,"y":2.3488868684032624}]},{"name":"e2aaf43a-a231-418a-bd2d-2414ac10575e","values":[{"x":0,"y":0.8803654848902269},{"x":1,"y":1.5999303272331638},{"x":2,"y":2.6164756606227524},{"x":3,"y":0.9247731894607298},{"x":4,"y":2.4333032665880587},{"x":5,"y":3.598024468708042},{"x":6,"y":4.967159291024576},{"x":7,"y":6.561723907042958},{"x":8,"y":8.209273679130403},{"x":9,"y":7.874131084587545}]},{"name":"058abd61-f251-472d-b6e0-caa4dc1e834d","values":[{"x":0,"y":1.859671816928926},{"x":1,"y":2.4001218121003234},{"x":2,"y":2.1068246065792566},{"x":3,"y":1.5749251073232209},{"x":4,"y":2.3782038007168014},{"x":5,"y":4.174490305983864},{"x":6,"y":5.295201288265345},{"x":7,"y":6.795282164577441},{"x":8,"y":7.788648354288771},{"x":9,"y":9.620596194770297}]},{"name":"3cc94ace-605c-4f4f-a756-a1bbb103e380","values":[{"x":0,"y":1.1137494872808231},{"x":1,"y":0.13071476285044437},{"x":2,"y":0.7597391362354607},{"x":3,"y":0.09254888359925317},{"x":4,"y":-1.8449770603604128},{"x":5,"y":-2.338317830808533},{"x":6,"y":-4.030647344396803},{"x":7,"y":-5.943574385087739},{"x":8,"y":-6.628315968046644},{"x":9,"y":-6.829053153584924}]},{"name":"1d87c7d7-84b9-4cc9-9526-198a0ee86039","values":[{"x":0,"y":-1.4169822128334788},{"x":1,"y":-2.7673563108348835},{"x":2,"y":-3.26623412649941},{"x":3,"y":-4.042638739639683},{"x":4,"y":-3.652493866262435},{"x":5,"y":-3.143724173613558},{"x":6,"y":-5.023749866238787},{"x":7,"y":-5.337344710025102},{"x":8,"y":-4.750579455709995},{"x":9,"y":-3.45273006763714}]}],"marks":[{"type":"line","from":{"data":"2f0252e4-b6fb-4351-a3f4-1cea575ddda9"},"properties":{"enter":{"x":{"scale":"x","field":"data.x"},"y":{"scale":"y","field":"data.y"},"stroke":{"value":"brown"},"strokeWidth":{"value":2},"strokeOpacity":{"value":1}}}},{"type":"line","from":{"data":"c2944015-ee97-4dd4-b602-2895e1c9397a"},"properties":{"enter":{"x":{"scale":"x","field":"data.x"},"y":{"scale":"y","field":"data.y"},"stroke":{"value":"blue"},"strokeWidth":{"value":2},"strokeOpacity":{"value":1}}}},{"type":"line","from":{"data":"d52ddf5f-f92f-43a2-b103-e09dbea70426"},"properties":{"enter":{"x":{"scale":"x","field":"data.x"},"y":{"scale":"y","field":"data.y"},"stroke":{"value":"red"},"strokeWidth":{"value":2},"strokeOpacity":{"value":1}}}},{"type":"line","from":{"data":"3e11ec77-0c35-4660-9f36-1216695aba2e"},"properties":{"enter":{"x":{"scale":"x","field":"data.x"},"y":{"scale":"y","field":"data.y"},"stroke":{"value":"blue"},"strokeWidth":{"value":2},"strokeOpacity":{"value":1}}}},{"type":"line","from":{"data":"3dbae370-02fa-45b5-9890-21689a932f49"},"properties":{"enter":{"x":{"scale":"x","field":"data.x"},"y":{"scale":"y","field":"data.y"},"stroke":{"value":"purple"},"strokeWidth":{"value":2},"strokeOpacity":{"value":1}}}},{"type":"line","from":{"data":"f9c1ab4a-ab9b-4f0d-9d5b-7a448fb0a3fb"},"properties":{"enter":{"x":{"scale":"x","field":"data.x"},"y":{"scale":"y","field":"data.y"},"stroke":{"value":"brown"},"strokeWidth":{"value":2},"strokeOpacity":{"value":1}}}},{"type":"line","from":{"data":"e2e3f019-9826-4ca7-9416-c7b373136a07"},"properties":{"enter":{"x":{"scale":"x","field":"data.x"},"y":{"scale":"y","field":"data.y"},"stroke":{"value":"purple"},"strokeWidth":{"value":2},"strokeOpacity":{"value":1}}}},{"type":"line","from":{"data":"66084c2e-4ec7-4340-8cd3-08b3fc87beab"},"properties":{"enter":{"x":{"scale":"x","field":"data.x"},"y":{"scale":"y","field":"data.y"},"stroke":{"value":"purple"},"strokeWidth":{"value":2},"strokeOpacity":{"value":1}}}},{"type":"line","from":{"data":"60e55515-0993-4d88-9bb0-8a4fa3b1bf8b"},"properties":{"enter":{"x":{"scale":"x","field":"data.x"},"y":{"scale":"y","field":"data.y"},"stroke":{"value":"green"},"strokeWidth":{"value":2},"strokeOpacity":{"value":1}}}},{"type":"line","from":{"data":"0910c07b-6143-4eb2-9791-df5fc1bc7f27"},"properties":{"enter":{"x":{"scale":"x","field":"data.x"},"y":{"scale":"y","field":"data.y"},"stroke":{"value":"blue"},"strokeWidth":{"value":2},"strokeOpacity":{"value":1}}}},{"type":"line","from":{"data":"0f6392de-05d3-43b9-9c22-a32cce6a4749"},"properties":{"enter":{"x":{"scale":"x","field":"data.x"},"y":{"scale":"y","field":"data.y"},"stroke":{"value":"black"},"strokeWidth":{"value":2},"strokeOpacity":{"value":1}}}},{"type":"line","from":{"data":"9b6c95b1-7972-4512-aeab-ba8ea54e0b1c"},"properties":{"enter":{"x":{"scale":"x","field":"data.x"},"y":{"scale":"y","field":"data.y"},"stroke":{"value":"yellow"},"strokeWidth":{"value":2},"strokeOpacity":{"value":1}}}},{"type":"line","from":{"data":"8e3c94d7-3835-4735-90cd-579019f8972a"},"properties":{"enter":{"x":{"scale":"x","field":"data.x"},"y":{"scale":"y","field":"data.y"},"stroke":{"value":"black"},"strokeWidth":{"value":2},"strokeOpacity":{"value":1}}}},{"type":"line","from":{"data":"c575166f-f990-4652-b164-1c184b501a7b"},"properties":{"enter":{"x":{"scale":"x","field":"data.x"},"y":{"scale":"y","field":"data.y"},"stroke":{"value":"purple"},"strokeWidth":{"value":2},"strokeOpacity":{"value":1}}}},{"type":"line","from":{"data":"3d601430-84bc-492b-b85f-cb7cc3d292fc"},"properties":{"enter":{"x":{"scale":"x","field":"data.x"},"y":{"scale":"y","field":"data.y"},"stroke":{"value":"brown"},"strokeWidth":{"value":2},"strokeOpacity":{"value":1}}}},{"type":"line","from":{"data":"7cfbf3b7-0b98-4356-af63-f1b9f2bcfca6"},"properties":{"enter":{"x":{"scale":"x","field":"data.x"},"y":{"scale":"y","field":"data.y"},"stroke":{"value":"purple"},"strokeWidth":{"value":2},"strokeOpacity":{"value":1}}}},{"type":"line","from":{"data":"275df9d6-acfc-486f-9df3-01570510b1f4"},"properties":{"enter":{"x":{"scale":"x","field":"data.x"},"y":{"scale":"y","field":"data.y"},"stroke":{"value":"black"},"strokeWidth":{"value":2},"strokeOpacity":{"value":1}}}},{"type":"line","from":{"data":"a9a57663-6c1c-445c-9d53-84f1083794c0"},"properties":{"enter":{"x":{"scale":"x","field":"data.x"},"y":{"scale":"y","field":"data.y"},"stroke":{"value":"brown"},"strokeWidth":{"value":2},"strokeOpacity":{"value":1}}}},{"type":"line","from":{"data":"e524bd56-6f43-4878-aa24-cf0ca7a3d17e"},"properties":{"enter":{"x":{"scale":"x","field":"data.x"},"y":{"scale":"y","field":"data.y"},"stroke":{"value":"green"},"strokeWidth":{"value":2},"strokeOpacity":{"value":1}}}},{"type":"line","from":{"data":"0f4bc174-2a05-493b-8621-d06cfa2b0414"},"properties":{"enter":{"x":{"scale":"x","field":"data.x"},"y":{"scale":"y","field":"data.y"},"stroke":{"value":"purple"},"strokeWidth":{"value":2},"strokeOpacity":{"value":1}}}},{"type":"line","from":{"data":"ebc9138d-e734-4153-ab0c-d5b33d4e0a8d"},"properties":{"enter":{"x":{"scale":"x","field":"data.x"},"y":{"scale":"y","field":"data.y"},"stroke":{"value":"red"},"strokeWidth":{"value":2},"strokeOpacity":{"value":1}}}},{"type":"line","from":{"data":"e2aaf43a-a231-418a-bd2d-2414ac10575e"},"properties":{"enter":{"x":{"scale":"x","field":"data.x"},"y":{"scale":"y","field":"data.y"},"stroke":{"value":"red"},"strokeWidth":{"value":2},"strokeOpacity":{"value":1}}}},{"type":"line","from":{"data":"058abd61-f251-472d-b6e0-caa4dc1e834d"},"properties":{"enter":{"x":{"scale":"x","field":"data.x"},"y":{"scale":"y","field":"data.y"},"stroke":{"value":"yellow"},"strokeWidth":{"value":2},"strokeOpacity":{"value":1}}}},{"type":"line","from":{"data":"3cc94ace-605c-4f4f-a756-a1bbb103e380"},"properties":{"enter":{"x":{"scale":"x","field":"data.x"},"y":{"scale":"y","field":"data.y"},"stroke":{"value":"yellow"},"strokeWidth":{"value":2},"strokeOpacity":{"value":1}}}},{"type":"line","from":{"data":"1d87c7d7-84b9-4cc9-9526-198a0ee86039"},"properties":{"enter":{"x":{"scale":"x","field":"data.x"},"y":{"scale":"y","field":"data.y"},"stroke":{"value":"brown"},"strokeWidth":{"value":2},"strokeOpacity":{"value":1}}}}]},"value":"#gorilla_repl.vega.VegaView{:content {:width 400, :height 247.2188, :padding {:top 10, :left 55, :bottom 40, :right 10}, :scales [{:name \"x\", :type \"linear\", :range \"width\", :zero false, :domain [0 9]} {:name \"y\", :type \"linear\", :range \"height\", :nice true, :zero false, :domain [-10 10]}], :axes [{:type \"x\", :scale \"x\"} {:type \"y\", :scale \"y\"}], :data ({:name \"2f0252e4-b6fb-4351-a3f4-1cea575ddda9\", :values ({:x 0, :y -0.39901273345316834} {:x 1, :y -1.754862237200335} {:x 2, :y -1.2299846485415333} {:x 3, :y -2.9735084892368135} {:x 4, :y -3.9381959046328765} {:x 5, :y -4.078505261588908} {:x 6, :y -5.175221781063404} {:x 7, :y -6.370083609952889} {:x 8, :y -7.411701030389484} {:x 9, :y -6.8566537652128545})} {:name \"c2944015-ee97-4dd4-b602-2895e1c9397a\", :values ({:x 0, :y -0.11939723351650411} {:x 1, :y -1.3003557012317382} {:x 2, :y 0.24000620249119814} {:x 3, :y 0.7324131762974471} {:x 4, :y 2.556748467248582} {:x 5, :y 1.4661216043818408} {:x 6, :y 0.4103484635982512} {:x 7, :y -0.6627104116427924} {:x 8, :y -2.063325838835441} {:x 9, :y -3.87306668807902})} {:name \"d52ddf5f-f92f-43a2-b103-e09dbea70426\", :values ({:x 0, :y -1.717099777403293} {:x 1, :y 0.16452282703006915} {:x 2, :y -0.35776365782616815} {:x 3, :y -1.4906710812505901} {:x 4, :y -0.9819577399953118} {:x 5, :y -2.196584944255572} {:x 6, :y -0.3640351108906055} {:x 7, :y 0.18457650890374833} {:x 8, :y -0.1439009451826968} {:x 9, :y 1.4533261844477297})} {:name \"3e11ec77-0c35-4660-9f36-1216695aba2e\", :values ({:x 0, :y 1.7235646235331812} {:x 1, :y 1.965203690463847} {:x 2, :y 1.1905377314579015} {:x 3, :y 2.219618506424478} {:x 4, :y 1.3372613900622792} {:x 5, :y 2.8087473670010112} {:x 6, :y 3.1249252914862833} {:x 7, :y 1.840860166684366} {:x 8, :y 0.8499951875712242} {:x 9, :y 1.694772014748998})} {:name \"3dbae370-02fa-45b5-9890-21689a932f49\", :values ({:x 0, :y -0.14898283170382864} {:x 1, :y -0.7191471642482901} {:x 2, :y -1.8587707254975614} {:x 3, :y -1.8375137170665843} {:x 4, :y -1.7826832312544028} {:x 5, :y -0.8866556852754117} {:x 6, :y 1.0467285458611801} {:x 7, :y 1.3550231525165284} {:x 8, :y 2.32336369000474} {:x 9, :y 1.6556382806630525})} {:name \"f9c1ab4a-ab9b-4f0d-9d5b-7a448fb0a3fb\", :values ({:x 0, :y 1.5255873150755281} {:x 1, :y 0.04845435448127944} {:x 2, :y -0.8563712993634381} {:x 3, :y 0.4834312053016765} {:x 4, :y -0.20744153339013305} {:x 5, :y -0.961137482139171} {:x 6, :y 0.903275842354958} {:x 7, :y 0.7750317004974114} {:x 8, :y -0.5005820707677611} {:x 9, :y 1.13950490373493})} {:name \"e2e3f019-9826-4ca7-9416-c7b373136a07\", :values ({:x 0, :y 1.1674662378658551} {:x 1, :y 2.900574415540312} {:x 2, :y 4.069579255295892} {:x 3, :y 6.045709409702286} {:x 4, :y 7.770723716367489} {:x 5, :y 7.289233073971907} {:x 6, :y 6.1699338662702} {:x 7, :y 6.523337011786046} {:x 8, :y 6.935577306852811} {:x 9, :y 8.456348027013874})} {:name \"66084c2e-4ec7-4340-8cd3-08b3fc87beab\", :values ({:x 0, :y -0.40642864056794537} {:x 1, :y -1.472852658498879} {:x 2, :y -2.1979416642622427} {:x 3, :y -3.366321784138849} {:x 4, :y -3.8078293883433885} {:x 5, :y -5.238584782679306} {:x 6, :y -7.030958985618994} {:x 7, :y -7.166383342889825} {:x 8, :y -7.73689015331548} {:x 9, :y -9.183155246836163})} {:name \"60e55515-0993-4d88-9bb0-8a4fa3b1bf8b\", :values ({:x 0, :y 1.3175979494913292} {:x 1, :y 1.9668117312179483} {:x 2, :y 0.34877603106445054} {:x 3, :y -0.5313594270385664} {:x 4, :y -1.2052602141080984} {:x 5, :y -0.33207188186120007} {:x 6, :y 0.79902691632459} {:x 7, :y 2.231051571887101} {:x 8, :y 2.594170268949183} {:x 9, :y 1.7169304918508228})} {:name \"0910c07b-6143-4eb2-9791-df5fc1bc7f27\", :values ({:x 0, :y -0.03255516131624425} {:x 1, :y 1.2151175278424367} {:x 2, :y 1.5850732063389348} {:x 3, :y 2.8908656310737193} {:x 4, :y 2.0710299855036904} {:x 5, :y 0.3650648483472745} {:x 6, :y 1.9010720542579786} {:x 7, :y 1.1692652412114164} {:x 8, :y 2.0188479013792655} {:x 9, :y 2.8085137377326257})} {:name \"0f6392de-05d3-43b9-9c22-a32cce6a4749\", :values ({:x 0, :y 0.9686820091621096} {:x 1, :y 0.6580267330346787} {:x 2, :y 2.4093191946530483} {:x 3, :y 3.1554722105609194} {:x 4, :y 2.16276676052893} {:x 5, :y 0.6534378337892726} {:x 6, :y 0.15227277041973153} {:x 7, :y -0.5646608776496765} {:x 8, :y -1.9125849198285874} {:x 9, :y -2.2819799463970414})} {:name \"9b6c95b1-7972-4512-aeab-ba8ea54e0b1c\", :values ({:x 0, :y 1.5855019660453964} {:x 1, :y 2.2814648344345896} {:x 2, :y 3.2667780185078223} {:x 3, :y 3.0264779844020904} {:x 4, :y 2.317790671409611} {:x 5, :y 2.6168483445249313} {:x 6, :y 4.467210142578543} {:x 7, :y 3.940377407037264} {:x 8, :y 4.282009164735352} {:x 9, :y 4.483420382550524})} {:name \"8e3c94d7-3835-4735-90cd-579019f8972a\", :values ({:x 0, :y -0.7361575336374857} {:x 1, :y -0.013142644867232711} {:x 2, :y 0.010951428493522819} {:x 3, :y -0.7627644727299465} {:x 4, :y -2.7199337477033483} {:x 5, :y -2.0554334004716948} {:x 6, :y -1.6248679558088677} {:x 7, :y -3.312004960840744} {:x 8, :y -1.490418862624403} {:x 9, :y -0.2632938400494495})} {:name \"c575166f-f990-4652-b164-1c184b501a7b\", :values ({:x 0, :y 0.850766993513747} {:x 1, :y 1.9351281105474867} {:x 2, :y 0.8876662038950018} {:x 3, :y 2.615198681427083} {:x 4, :y 1.8438786126224977} {:x 5, :y 1.4197334619819095} {:x 6, :y 1.4478582892286012} {:x 7, :y 3.085984152704274} {:x 8, :y 2.819594361964513} {:x 9, :y 2.093014913523483})} {:name \"3d601430-84bc-492b-b85f-cb7cc3d292fc\", :values ({:x 0, :y 1.081361566878556} {:x 1, :y 3.053294916498886} {:x 2, :y 2.3894426213673707} {:x 3, :y 2.93403357229243} {:x 4, :y 3.3911278649824395} {:x 5, :y 4.001705778194514} {:x 6, :y 4.04789429257488} {:x 7, :y 2.140910708318498} {:x 8, :y 2.346585214560374} {:x 9, :y 2.897062565460267})} {:name \"7cfbf3b7-0b98-4356-af63-f1b9f2bcfca6\", :values ({:x 0, :y 1.4952357875972648} {:x 1, :y 3.2073276153684684} {:x 2, :y 1.6393575476360915} {:x 3, :y 3.130331000857769} {:x 4, :y 4.588735338679788} {:x 5, :y 5.878563152835455} {:x 6, :y 7.805396892747015} {:x 7, :y 8.593712173191626} {:x 8, :y 7.99758795082672} {:x 9, :y 6.456423169913544})} {:name \"275df9d6-acfc-486f-9df3-01570510b1f4\", :values ({:x 0, :y 1.9630189200773938} {:x 1, :y 2.4390320420457465} {:x 2, :y 4.2959088690173575} {:x 3, :y 2.945395026574465} {:x 4, :y 3.7153716621025197} {:x 5, :y 2.094542964849217} {:x 6, :y 2.404812403909708} {:x 7, :y 3.0953718731292055} {:x 8, :y 3.6872358548722133} {:x 9, :y 1.7371978414684408})} {:name \"a9a57663-6c1c-445c-9d53-84f1083794c0\", :values ({:x 0, :y -0.31223037194954273} {:x 1, :y 1.4141550249744466} {:x 2, :y 3.2093638868610164} {:x 3, :y 3.440146520874115} {:x 4, :y 2.6711555788576637} {:x 5, :y 4.074741582119338} {:x 6, :y 5.975065689178046} {:x 7, :y 5.845202421586223} {:x 8, :y 4.058393147649932} {:x 9, :y 4.71361228390507})} {:name \"e524bd56-6f43-4878-aa24-cf0ca7a3d17e\", :values ({:x 0, :y -0.42911307291601375} {:x 1, :y 1.1637488275166845} {:x 2, :y 1.656562336152673} {:x 3, :y -0.07143201841100844} {:x 4, :y 1.5548899478036198} {:x 5, :y 1.049155481705986} {:x 6, :y -0.5760424660622148} {:x 7, :y -1.8681874789693511} {:x 8, :y -1.5564232217714888} {:x 9, :y -2.514090607731334})} {:name \"0f4bc174-2a05-493b-8621-d06cfa2b0414\", :values ({:x 0, :y -0.39993547230771576} {:x 1, :y -1.2227627066698705} {:x 2, :y -1.7203057146818725} {:x 3, :y 0.16637534465336049} {:x 4, :y 2.029676871857914} {:x 5, :y 0.4197460464921141} {:x 6, :y 1.8649207664908152} {:x 7, :y 1.1243317927095893} {:x 8, :y 1.5218134250161643} {:x 9, :y 2.282144281472971})} {:name \"ebc9138d-e734-4153-ab0c-d5b33d4e0a8d\", :values ({:x 0, :y 1.1460782324723908} {:x 1, :y 2.697391860605614} {:x 2, :y 1.7765088431038887} {:x 3, :y 0.8501579950417621} {:x 4, :y 1.8418248563672706} {:x 5, :y 0.05208324855457677} {:x 6, :y 1.813924370415278} {:x 7, :y 0.9464368649712869} {:x 8, :y 1.5902114177663238} {:x 9, :y 2.3488868684032624})} {:name \"e2aaf43a-a231-418a-bd2d-2414ac10575e\", :values ({:x 0, :y 0.8803654848902269} {:x 1, :y 1.5999303272331638} {:x 2, :y 2.6164756606227524} {:x 3, :y 0.9247731894607298} {:x 4, :y 2.4333032665880587} {:x 5, :y 3.598024468708042} {:x 6, :y 4.967159291024576} {:x 7, :y 6.561723907042958} {:x 8, :y 8.209273679130403} {:x 9, :y 7.874131084587545})} {:name \"058abd61-f251-472d-b6e0-caa4dc1e834d\", :values ({:x 0, :y 1.859671816928926} {:x 1, :y 2.4001218121003234} {:x 2, :y 2.1068246065792566} {:x 3, :y 1.5749251073232209} {:x 4, :y 2.3782038007168014} {:x 5, :y 4.174490305983864} {:x 6, :y 5.295201288265345} {:x 7, :y 6.795282164577441} {:x 8, :y 7.788648354288771} {:x 9, :y 9.620596194770297})} {:name \"3cc94ace-605c-4f4f-a756-a1bbb103e380\", :values ({:x 0, :y 1.1137494872808231} {:x 1, :y 0.13071476285044437} {:x 2, :y 0.7597391362354607} {:x 3, :y 0.09254888359925317} {:x 4, :y -1.8449770603604128} {:x 5, :y -2.338317830808533} {:x 6, :y -4.030647344396803} {:x 7, :y -5.943574385087739} {:x 8, :y -6.628315968046644} {:x 9, :y -6.829053153584924})} {:name \"1d87c7d7-84b9-4cc9-9526-198a0ee86039\", :values ({:x 0, :y -1.4169822128334788} {:x 1, :y -2.7673563108348835} {:x 2, :y -3.26623412649941} {:x 3, :y -4.042638739639683} {:x 4, :y -3.652493866262435} {:x 5, :y -3.143724173613558} {:x 6, :y -5.023749866238787} {:x 7, :y -5.337344710025102} {:x 8, :y -4.750579455709995} {:x 9, :y -3.45273006763714})}), :marks ({:type \"line\", :from {:data \"2f0252e4-b6fb-4351-a3f4-1cea575ddda9\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :stroke {:value \"brown\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}} {:type \"line\", :from {:data \"c2944015-ee97-4dd4-b602-2895e1c9397a\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :stroke {:value \"blue\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}} {:type \"line\", :from {:data \"d52ddf5f-f92f-43a2-b103-e09dbea70426\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :stroke {:value \"red\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}} {:type \"line\", :from {:data \"3e11ec77-0c35-4660-9f36-1216695aba2e\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :stroke {:value \"blue\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}} {:type \"line\", :from {:data \"3dbae370-02fa-45b5-9890-21689a932f49\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :stroke {:value \"purple\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}} {:type \"line\", :from {:data \"f9c1ab4a-ab9b-4f0d-9d5b-7a448fb0a3fb\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :stroke {:value \"brown\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}} {:type \"line\", :from {:data \"e2e3f019-9826-4ca7-9416-c7b373136a07\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :stroke {:value \"purple\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}} {:type \"line\", :from {:data \"66084c2e-4ec7-4340-8cd3-08b3fc87beab\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :stroke {:value \"purple\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}} {:type \"line\", :from {:data \"60e55515-0993-4d88-9bb0-8a4fa3b1bf8b\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :stroke {:value \"green\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}} {:type \"line\", :from {:data \"0910c07b-6143-4eb2-9791-df5fc1bc7f27\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :stroke {:value \"blue\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}} {:type \"line\", :from {:data \"0f6392de-05d3-43b9-9c22-a32cce6a4749\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :stroke {:value \"black\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}} {:type \"line\", :from {:data \"9b6c95b1-7972-4512-aeab-ba8ea54e0b1c\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :stroke {:value \"yellow\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}} {:type \"line\", :from {:data \"8e3c94d7-3835-4735-90cd-579019f8972a\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :stroke {:value \"black\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}} {:type \"line\", :from {:data \"c575166f-f990-4652-b164-1c184b501a7b\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :stroke {:value \"purple\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}} {:type \"line\", :from {:data \"3d601430-84bc-492b-b85f-cb7cc3d292fc\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :stroke {:value \"brown\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}} {:type \"line\", :from {:data \"7cfbf3b7-0b98-4356-af63-f1b9f2bcfca6\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :stroke {:value \"purple\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}} {:type \"line\", :from {:data \"275df9d6-acfc-486f-9df3-01570510b1f4\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :stroke {:value \"black\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}} {:type \"line\", :from {:data \"a9a57663-6c1c-445c-9d53-84f1083794c0\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :stroke {:value \"brown\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}} {:type \"line\", :from {:data \"e524bd56-6f43-4878-aa24-cf0ca7a3d17e\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :stroke {:value \"green\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}} {:type \"line\", :from {:data \"0f4bc174-2a05-493b-8621-d06cfa2b0414\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :stroke {:value \"purple\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}} {:type \"line\", :from {:data \"ebc9138d-e734-4153-ab0c-d5b33d4e0a8d\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :stroke {:value \"red\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}} {:type \"line\", :from {:data \"e2aaf43a-a231-418a-bd2d-2414ac10575e\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :stroke {:value \"red\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}} {:type \"line\", :from {:data \"058abd61-f251-472d-b6e0-caa4dc1e834d\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :stroke {:value \"yellow\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}} {:type \"line\", :from {:data \"3cc94ace-605c-4f4f-a756-a1bbb103e380\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :stroke {:value \"yellow\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}} {:type \"line\", :from {:data \"1d87c7d7-84b9-4cc9-9526-198a0ee86039\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :stroke {:value \"brown\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}})}}"}],"value":"[[[[#'degeneracy/T,#'degeneracy/is-results],#'degeneracy/samples],#'degeneracy/color-dist],#gorilla_repl.vega.VegaView{:content {:width 400, :height 247.2188, :padding {:top 10, :left 55, :bottom 40, :right 10}, :scales [{:name \"x\", :type \"linear\", :range \"width\", :zero false, :domain [0 9]} {:name \"y\", :type \"linear\", :range \"height\", :nice true, :zero false, :domain [-10 10]}], :axes [{:type \"x\", :scale \"x\"} {:type \"y\", :scale \"y\"}], :data ({:name \"2f0252e4-b6fb-4351-a3f4-1cea575ddda9\", :values ({:x 0, :y -0.39901273345316834} {:x 1, :y -1.754862237200335} {:x 2, :y -1.2299846485415333} {:x 3, :y -2.9735084892368135} {:x 4, :y -3.9381959046328765} {:x 5, :y -4.078505261588908} {:x 6, :y -5.175221781063404} {:x 7, :y -6.370083609952889} {:x 8, :y -7.411701030389484} {:x 9, :y -6.8566537652128545})} {:name \"c2944015-ee97-4dd4-b602-2895e1c9397a\", :values ({:x 0, :y -0.11939723351650411} {:x 1, :y -1.3003557012317382} {:x 2, :y 0.24000620249119814} {:x 3, :y 0.7324131762974471} {:x 4, :y 2.556748467248582} {:x 5, :y 1.4661216043818408} {:x 6, :y 0.4103484635982512} {:x 7, :y -0.6627104116427924} {:x 8, :y -2.063325838835441} {:x 9, :y -3.87306668807902})} {:name \"d52ddf5f-f92f-43a2-b103-e09dbea70426\", :values ({:x 0, :y -1.717099777403293} {:x 1, :y 0.16452282703006915} {:x 2, :y -0.35776365782616815} {:x 3, :y -1.4906710812505901} {:x 4, :y -0.9819577399953118} {:x 5, :y -2.196584944255572} {:x 6, :y -0.3640351108906055} {:x 7, :y 0.18457650890374833} {:x 8, :y -0.1439009451826968} {:x 9, :y 1.4533261844477297})} {:name \"3e11ec77-0c35-4660-9f36-1216695aba2e\", :values ({:x 0, :y 1.7235646235331812} {:x 1, :y 1.965203690463847} {:x 2, :y 1.1905377314579015} {:x 3, :y 2.219618506424478} {:x 4, :y 1.3372613900622792} {:x 5, :y 2.8087473670010112} {:x 6, :y 3.1249252914862833} {:x 7, :y 1.840860166684366} {:x 8, :y 0.8499951875712242} {:x 9, :y 1.694772014748998})} {:name \"3dbae370-02fa-45b5-9890-21689a932f49\", :values ({:x 0, :y -0.14898283170382864} {:x 1, :y -0.7191471642482901} {:x 2, :y -1.8587707254975614} {:x 3, :y -1.8375137170665843} {:x 4, :y -1.7826832312544028} {:x 5, :y -0.8866556852754117} {:x 6, :y 1.0467285458611801} {:x 7, :y 1.3550231525165284} {:x 8, :y 2.32336369000474} {:x 9, :y 1.6556382806630525})} {:name \"f9c1ab4a-ab9b-4f0d-9d5b-7a448fb0a3fb\", :values ({:x 0, :y 1.5255873150755281} {:x 1, :y 0.04845435448127944} {:x 2, :y -0.8563712993634381} {:x 3, :y 0.4834312053016765} {:x 4, :y -0.20744153339013305} {:x 5, :y -0.961137482139171} {:x 6, :y 0.903275842354958} {:x 7, :y 0.7750317004974114} {:x 8, :y -0.5005820707677611} {:x 9, :y 1.13950490373493})} {:name \"e2e3f019-9826-4ca7-9416-c7b373136a07\", :values ({:x 0, :y 1.1674662378658551} {:x 1, :y 2.900574415540312} {:x 2, :y 4.069579255295892} {:x 3, :y 6.045709409702286} {:x 4, :y 7.770723716367489} {:x 5, :y 7.289233073971907} {:x 6, :y 6.1699338662702} {:x 7, :y 6.523337011786046} {:x 8, :y 6.935577306852811} {:x 9, :y 8.456348027013874})} {:name \"66084c2e-4ec7-4340-8cd3-08b3fc87beab\", :values ({:x 0, :y -0.40642864056794537} {:x 1, :y -1.472852658498879} {:x 2, :y -2.1979416642622427} {:x 3, :y -3.366321784138849} {:x 4, :y -3.8078293883433885} {:x 5, :y -5.238584782679306} {:x 6, :y -7.030958985618994} {:x 7, :y -7.166383342889825} {:x 8, :y -7.73689015331548} {:x 9, :y -9.183155246836163})} {:name \"60e55515-0993-4d88-9bb0-8a4fa3b1bf8b\", :values ({:x 0, :y 1.3175979494913292} {:x 1, :y 1.9668117312179483} {:x 2, :y 0.34877603106445054} {:x 3, :y -0.5313594270385664} {:x 4, :y -1.2052602141080984} {:x 5, :y -0.33207188186120007} {:x 6, :y 0.79902691632459} {:x 7, :y 2.231051571887101} {:x 8, :y 2.594170268949183} {:x 9, :y 1.7169304918508228})} {:name \"0910c07b-6143-4eb2-9791-df5fc1bc7f27\", :values ({:x 0, :y -0.03255516131624425} {:x 1, :y 1.2151175278424367} {:x 2, :y 1.5850732063389348} {:x 3, :y 2.8908656310737193} {:x 4, :y 2.0710299855036904} {:x 5, :y 0.3650648483472745} {:x 6, :y 1.9010720542579786} {:x 7, :y 1.1692652412114164} {:x 8, :y 2.0188479013792655} {:x 9, :y 2.8085137377326257})} {:name \"0f6392de-05d3-43b9-9c22-a32cce6a4749\", :values ({:x 0, :y 0.9686820091621096} {:x 1, :y 0.6580267330346787} {:x 2, :y 2.4093191946530483} {:x 3, :y 3.1554722105609194} {:x 4, :y 2.16276676052893} {:x 5, :y 0.6534378337892726} {:x 6, :y 0.15227277041973153} {:x 7, :y -0.5646608776496765} {:x 8, :y -1.9125849198285874} {:x 9, :y -2.2819799463970414})} {:name \"9b6c95b1-7972-4512-aeab-ba8ea54e0b1c\", :values ({:x 0, :y 1.5855019660453964} {:x 1, :y 2.2814648344345896} {:x 2, :y 3.2667780185078223} {:x 3, :y 3.0264779844020904} {:x 4, :y 2.317790671409611} {:x 5, :y 2.6168483445249313} {:x 6, :y 4.467210142578543} {:x 7, :y 3.940377407037264} {:x 8, :y 4.282009164735352} {:x 9, :y 4.483420382550524})} {:name \"8e3c94d7-3835-4735-90cd-579019f8972a\", :values ({:x 0, :y -0.7361575336374857} {:x 1, :y -0.013142644867232711} {:x 2, :y 0.010951428493522819} {:x 3, :y -0.7627644727299465} {:x 4, :y -2.7199337477033483} {:x 5, :y -2.0554334004716948} {:x 6, :y -1.6248679558088677} {:x 7, :y -3.312004960840744} {:x 8, :y -1.490418862624403} {:x 9, :y -0.2632938400494495})} {:name \"c575166f-f990-4652-b164-1c184b501a7b\", :values ({:x 0, :y 0.850766993513747} {:x 1, :y 1.9351281105474867} {:x 2, :y 0.8876662038950018} {:x 3, :y 2.615198681427083} {:x 4, :y 1.8438786126224977} {:x 5, :y 1.4197334619819095} {:x 6, :y 1.4478582892286012} {:x 7, :y 3.085984152704274} {:x 8, :y 2.819594361964513} {:x 9, :y 2.093014913523483})} {:name \"3d601430-84bc-492b-b85f-cb7cc3d292fc\", :values ({:x 0, :y 1.081361566878556} {:x 1, :y 3.053294916498886} {:x 2, :y 2.3894426213673707} {:x 3, :y 2.93403357229243} {:x 4, :y 3.3911278649824395} {:x 5, :y 4.001705778194514} {:x 6, :y 4.04789429257488} {:x 7, :y 2.140910708318498} {:x 8, :y 2.346585214560374} {:x 9, :y 2.897062565460267})} {:name \"7cfbf3b7-0b98-4356-af63-f1b9f2bcfca6\", :values ({:x 0, :y 1.4952357875972648} {:x 1, :y 3.2073276153684684} {:x 2, :y 1.6393575476360915} {:x 3, :y 3.130331000857769} {:x 4, :y 4.588735338679788} {:x 5, :y 5.878563152835455} {:x 6, :y 7.805396892747015} {:x 7, :y 8.593712173191626} {:x 8, :y 7.99758795082672} {:x 9, :y 6.456423169913544})} {:name \"275df9d6-acfc-486f-9df3-01570510b1f4\", :values ({:x 0, :y 1.9630189200773938} {:x 1, :y 2.4390320420457465} {:x 2, :y 4.2959088690173575} {:x 3, :y 2.945395026574465} {:x 4, :y 3.7153716621025197} {:x 5, :y 2.094542964849217} {:x 6, :y 2.404812403909708} {:x 7, :y 3.0953718731292055} {:x 8, :y 3.6872358548722133} {:x 9, :y 1.7371978414684408})} {:name \"a9a57663-6c1c-445c-9d53-84f1083794c0\", :values ({:x 0, :y -0.31223037194954273} {:x 1, :y 1.4141550249744466} {:x 2, :y 3.2093638868610164} {:x 3, :y 3.440146520874115} {:x 4, :y 2.6711555788576637} {:x 5, :y 4.074741582119338} {:x 6, :y 5.975065689178046} {:x 7, :y 5.845202421586223} {:x 8, :y 4.058393147649932} {:x 9, :y 4.71361228390507})} {:name \"e524bd56-6f43-4878-aa24-cf0ca7a3d17e\", :values ({:x 0, :y -0.42911307291601375} {:x 1, :y 1.1637488275166845} {:x 2, :y 1.656562336152673} {:x 3, :y -0.07143201841100844} {:x 4, :y 1.5548899478036198} {:x 5, :y 1.049155481705986} {:x 6, :y -0.5760424660622148} {:x 7, :y -1.8681874789693511} {:x 8, :y -1.5564232217714888} {:x 9, :y -2.514090607731334})} {:name \"0f4bc174-2a05-493b-8621-d06cfa2b0414\", :values ({:x 0, :y -0.39993547230771576} {:x 1, :y -1.2227627066698705} {:x 2, :y -1.7203057146818725} {:x 3, :y 0.16637534465336049} {:x 4, :y 2.029676871857914} {:x 5, :y 0.4197460464921141} {:x 6, :y 1.8649207664908152} {:x 7, :y 1.1243317927095893} {:x 8, :y 1.5218134250161643} {:x 9, :y 2.282144281472971})} {:name \"ebc9138d-e734-4153-ab0c-d5b33d4e0a8d\", :values ({:x 0, :y 1.1460782324723908} {:x 1, :y 2.697391860605614} {:x 2, :y 1.7765088431038887} {:x 3, :y 0.8501579950417621} {:x 4, :y 1.8418248563672706} {:x 5, :y 0.05208324855457677} {:x 6, :y 1.813924370415278} {:x 7, :y 0.9464368649712869} {:x 8, :y 1.5902114177663238} {:x 9, :y 2.3488868684032624})} {:name \"e2aaf43a-a231-418a-bd2d-2414ac10575e\", :values ({:x 0, :y 0.8803654848902269} {:x 1, :y 1.5999303272331638} {:x 2, :y 2.6164756606227524} {:x 3, :y 0.9247731894607298} {:x 4, :y 2.4333032665880587} {:x 5, :y 3.598024468708042} {:x 6, :y 4.967159291024576} {:x 7, :y 6.561723907042958} {:x 8, :y 8.209273679130403} {:x 9, :y 7.874131084587545})} {:name \"058abd61-f251-472d-b6e0-caa4dc1e834d\", :values ({:x 0, :y 1.859671816928926} {:x 1, :y 2.4001218121003234} {:x 2, :y 2.1068246065792566} {:x 3, :y 1.5749251073232209} {:x 4, :y 2.3782038007168014} {:x 5, :y 4.174490305983864} {:x 6, :y 5.295201288265345} {:x 7, :y 6.795282164577441} {:x 8, :y 7.788648354288771} {:x 9, :y 9.620596194770297})} {:name \"3cc94ace-605c-4f4f-a756-a1bbb103e380\", :values ({:x 0, :y 1.1137494872808231} {:x 1, :y 0.13071476285044437} {:x 2, :y 0.7597391362354607} {:x 3, :y 0.09254888359925317} {:x 4, :y -1.8449770603604128} {:x 5, :y -2.338317830808533} {:x 6, :y -4.030647344396803} {:x 7, :y -5.943574385087739} {:x 8, :y -6.628315968046644} {:x 9, :y -6.829053153584924})} {:name \"1d87c7d7-84b9-4cc9-9526-198a0ee86039\", :values ({:x 0, :y -1.4169822128334788} {:x 1, :y -2.7673563108348835} {:x 2, :y -3.26623412649941} {:x 3, :y -4.042638739639683} {:x 4, :y -3.652493866262435} {:x 5, :y -3.143724173613558} {:x 6, :y -5.023749866238787} {:x 7, :y -5.337344710025102} {:x 8, :y -4.750579455709995} {:x 9, :y -3.45273006763714})}), :marks ({:type \"line\", :from {:data \"2f0252e4-b6fb-4351-a3f4-1cea575ddda9\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :stroke {:value \"brown\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}} {:type \"line\", :from {:data \"c2944015-ee97-4dd4-b602-2895e1c9397a\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :stroke {:value \"blue\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}} {:type \"line\", :from {:data \"d52ddf5f-f92f-43a2-b103-e09dbea70426\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :stroke {:value \"red\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}} {:type \"line\", :from {:data \"3e11ec77-0c35-4660-9f36-1216695aba2e\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :stroke {:value \"blue\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}} {:type \"line\", :from {:data \"3dbae370-02fa-45b5-9890-21689a932f49\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :stroke {:value \"purple\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}} {:type \"line\", :from {:data \"f9c1ab4a-ab9b-4f0d-9d5b-7a448fb0a3fb\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :stroke {:value \"brown\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}} {:type \"line\", :from {:data \"e2e3f019-9826-4ca7-9416-c7b373136a07\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :stroke {:value \"purple\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}} {:type \"line\", :from {:data \"66084c2e-4ec7-4340-8cd3-08b3fc87beab\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :stroke {:value \"purple\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}} {:type \"line\", :from {:data \"60e55515-0993-4d88-9bb0-8a4fa3b1bf8b\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :stroke {:value \"green\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}} {:type \"line\", :from {:data \"0910c07b-6143-4eb2-9791-df5fc1bc7f27\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :stroke {:value \"blue\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}} {:type \"line\", :from {:data \"0f6392de-05d3-43b9-9c22-a32cce6a4749\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :stroke {:value \"black\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}} {:type \"line\", :from {:data \"9b6c95b1-7972-4512-aeab-ba8ea54e0b1c\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :stroke {:value \"yellow\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}} {:type \"line\", :from {:data \"8e3c94d7-3835-4735-90cd-579019f8972a\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :stroke {:value \"black\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}} {:type \"line\", :from {:data \"c575166f-f990-4652-b164-1c184b501a7b\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :stroke {:value \"purple\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}} {:type \"line\", :from {:data \"3d601430-84bc-492b-b85f-cb7cc3d292fc\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :stroke {:value \"brown\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}} {:type \"line\", :from {:data \"7cfbf3b7-0b98-4356-af63-f1b9f2bcfca6\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :stroke {:value \"purple\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}} {:type \"line\", :from {:data \"275df9d6-acfc-486f-9df3-01570510b1f4\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :stroke {:value \"black\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}} {:type \"line\", :from {:data \"a9a57663-6c1c-445c-9d53-84f1083794c0\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :stroke {:value \"brown\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}} {:type \"line\", :from {:data \"e524bd56-6f43-4878-aa24-cf0ca7a3d17e\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :stroke {:value \"green\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}} {:type \"line\", :from {:data \"0f4bc174-2a05-493b-8621-d06cfa2b0414\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :stroke {:value \"purple\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}} {:type \"line\", :from {:data \"ebc9138d-e734-4153-ab0c-d5b33d4e0a8d\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :stroke {:value \"red\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}} {:type \"line\", :from {:data \"e2aaf43a-a231-418a-bd2d-2414ac10575e\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :stroke {:value \"red\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}} {:type \"line\", :from {:data \"058abd61-f251-472d-b6e0-caa4dc1e834d\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :stroke {:value \"yellow\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}} {:type \"line\", :from {:data \"3cc94ace-605c-4f4f-a756-a1bbb103e380\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :stroke {:value \"yellow\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}} {:type \"line\", :from {:data \"1d87c7d7-84b9-4cc9-9526-198a0ee86039\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :stroke {:value \"brown\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}})}}]"}
;; <=

;; **
;;; The space of possible paths, even in this simple example, is pretty big. Every path is essentially a T-dimensional vector in the space @@[-2, 2]^T@@. When we sample paths, we essentially draw a point from this space at uniform random. We will see that the quality of the importance-sampling algorithm in this space depends **heavily** on the dimensionality of the space @@T@@, to the extent that importance sampling becomes essentially unusable if @@T@@ is larger than about four.
;;; 
;;; Having defined this model, we'll proceed to ask a somewhat oblique question about it, whose purpose will become clear soon. What's the probability of two randomly sampled paths from this model being close to each other?
;;; 
;;; Pick a random path from the paths we just sampled, as a point of comparison. Say, this one:
;; **

;; @@
(def path (first samples))

(plot/list-plot path :joined :true)

path
;; @@
;; =>
;;; {"type":"list-like","open":"","close":"","separator":"</pre><pre>","items":[{"type":"list-like","open":"","close":"","separator":"</pre><pre>","items":[{"type":"html","content":"<span class='clj-var'>#&#x27;degeneracy/path</span>","value":"#'degeneracy/path"},{"type":"vega","content":{"width":400,"height":247.2187957763672,"padding":{"top":10,"left":55,"bottom":40,"right":10},"data":[{"name":"d689d4d3-ce75-4df2-9a4c-db627bda5c64","values":[{"x":0,"y":-0.39901273345316834},{"x":1,"y":-1.754862237200335},{"x":2,"y":-1.2299846485415333},{"x":3,"y":-2.9735084892368135},{"x":4,"y":-3.9381959046328765},{"x":5,"y":-4.078505261588908},{"x":6,"y":-5.175221781063404},{"x":7,"y":-6.370083609952889},{"x":8,"y":-7.411701030389484},{"x":9,"y":-6.8566537652128545}]}],"marks":[{"type":"line","from":{"data":"d689d4d3-ce75-4df2-9a4c-db627bda5c64"},"properties":{"enter":{"x":{"scale":"x","field":"data.x"},"y":{"scale":"y","field":"data.y"},"stroke":{"value":"#FF29D2"},"strokeWidth":{"value":2},"strokeOpacity":{"value":1}}}}],"scales":[{"name":"x","type":"linear","range":"width","zero":false,"domain":{"data":"d689d4d3-ce75-4df2-9a4c-db627bda5c64","field":"data.x"}},{"name":"y","type":"linear","range":"height","nice":true,"zero":false,"domain":{"data":"d689d4d3-ce75-4df2-9a4c-db627bda5c64","field":"data.y"}}],"axes":[{"type":"x","scale":"x"},{"type":"y","scale":"y"}]},"value":"#gorilla_repl.vega.VegaView{:content {:width 400, :height 247.2188, :padding {:top 10, :left 55, :bottom 40, :right 10}, :data [{:name \"d689d4d3-ce75-4df2-9a4c-db627bda5c64\", :values ({:x 0, :y -0.39901273345316834} {:x 1, :y -1.754862237200335} {:x 2, :y -1.2299846485415333} {:x 3, :y -2.9735084892368135} {:x 4, :y -3.9381959046328765} {:x 5, :y -4.078505261588908} {:x 6, :y -5.175221781063404} {:x 7, :y -6.370083609952889} {:x 8, :y -7.411701030389484} {:x 9, :y -6.8566537652128545})}], :marks [{:type \"line\", :from {:data \"d689d4d3-ce75-4df2-9a4c-db627bda5c64\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :stroke {:value \"#FF29D2\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}}], :scales [{:name \"x\", :type \"linear\", :range \"width\", :zero false, :domain {:data \"d689d4d3-ce75-4df2-9a4c-db627bda5c64\", :field \"data.x\"}} {:name \"y\", :type \"linear\", :range \"height\", :nice true, :zero false, :domain {:data \"d689d4d3-ce75-4df2-9a4c-db627bda5c64\", :field \"data.y\"}}], :axes [{:type \"x\", :scale \"x\"} {:type \"y\", :scale \"y\"}]}}"}],"value":"[#'degeneracy/path,#gorilla_repl.vega.VegaView{:content {:width 400, :height 247.2188, :padding {:top 10, :left 55, :bottom 40, :right 10}, :data [{:name \"d689d4d3-ce75-4df2-9a4c-db627bda5c64\", :values ({:x 0, :y -0.39901273345316834} {:x 1, :y -1.754862237200335} {:x 2, :y -1.2299846485415333} {:x 3, :y -2.9735084892368135} {:x 4, :y -3.9381959046328765} {:x 5, :y -4.078505261588908} {:x 6, :y -5.175221781063404} {:x 7, :y -6.370083609952889} {:x 8, :y -7.411701030389484} {:x 9, :y -6.8566537652128545})}], :marks [{:type \"line\", :from {:data \"d689d4d3-ce75-4df2-9a4c-db627bda5c64\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :stroke {:value \"#FF29D2\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}}], :scales [{:name \"x\", :type \"linear\", :range \"width\", :zero false, :domain {:data \"d689d4d3-ce75-4df2-9a4c-db627bda5c64\", :field \"data.x\"}} {:name \"y\", :type \"linear\", :range \"height\", :nice true, :zero false, :domain {:data \"d689d4d3-ce75-4df2-9a4c-db627bda5c64\", :field \"data.y\"}}], :axes [{:type \"x\", :scale \"x\"} {:type \"y\", :scale \"y\"}]}}]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-double'>-0.39901273345316834</span>","value":"-0.39901273345316834"},{"type":"html","content":"<span class='clj-double'>-1.754862237200335</span>","value":"-1.754862237200335"},{"type":"html","content":"<span class='clj-double'>-1.2299846485415333</span>","value":"-1.2299846485415333"},{"type":"html","content":"<span class='clj-double'>-2.9735084892368135</span>","value":"-2.9735084892368135"},{"type":"html","content":"<span class='clj-double'>-3.9381959046328765</span>","value":"-3.9381959046328765"},{"type":"html","content":"<span class='clj-double'>-4.078505261588908</span>","value":"-4.078505261588908"},{"type":"html","content":"<span class='clj-double'>-5.175221781063404</span>","value":"-5.175221781063404"},{"type":"html","content":"<span class='clj-double'>-6.370083609952889</span>","value":"-6.370083609952889"},{"type":"html","content":"<span class='clj-double'>-7.411701030389484</span>","value":"-7.411701030389484"},{"type":"html","content":"<span class='clj-double'>-6.8566537652128545</span>","value":"-6.8566537652128545"}],"value":"[-0.39901273345316834 -1.754862237200335 -1.2299846485415333 -2.9735084892368135 -3.9381959046328765 -4.078505261588908 -5.175221781063404 -6.370083609952889 -7.411701030389484 -6.8566537652128545]"}],"value":"[[#'degeneracy/path,#gorilla_repl.vega.VegaView{:content {:width 400, :height 247.2188, :padding {:top 10, :left 55, :bottom 40, :right 10}, :data [{:name \"d689d4d3-ce75-4df2-9a4c-db627bda5c64\", :values ({:x 0, :y -0.39901273345316834} {:x 1, :y -1.754862237200335} {:x 2, :y -1.2299846485415333} {:x 3, :y -2.9735084892368135} {:x 4, :y -3.9381959046328765} {:x 5, :y -4.078505261588908} {:x 6, :y -5.175221781063404} {:x 7, :y -6.370083609952889} {:x 8, :y -7.411701030389484} {:x 9, :y -6.8566537652128545})}], :marks [{:type \"line\", :from {:data \"d689d4d3-ce75-4df2-9a4c-db627bda5c64\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :stroke {:value \"#FF29D2\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}}], :scales [{:name \"x\", :type \"linear\", :range \"width\", :zero false, :domain {:data \"d689d4d3-ce75-4df2-9a4c-db627bda5c64\", :field \"data.x\"}} {:name \"y\", :type \"linear\", :range \"height\", :nice true, :zero false, :domain {:data \"d689d4d3-ce75-4df2-9a4c-db627bda5c64\", :field \"data.y\"}}], :axes [{:type \"x\", :scale \"x\"} {:type \"y\", :scale \"y\"}]}}],[-0.39901273345316834 -1.754862237200335 -1.2299846485415333 -2.9735084892368135 -3.9381959046328765 -4.078505261588908 -5.175221781063404 -6.370083609952889 -7.411701030389484 -6.8566537652128545]]"}
;; <=

;; **
;;; Now, for every other possible path, estimate its maximum deviation from this reference path. That is, estimate the largest distance at any point between the two paths:
;; **

;; @@
(defquery find-max-dev [path]
  (let [T (count path)]
    (loop [t 1
           z [(sample (uniform-continuous -2 2))]]
      (if (= t T)
        (apply max
               (map #(abs (- %1 %2))
                    z path))

        (recur (+ t 1)
               (conj z (sample 
                         (uniform-continuous (- (last z) 2) (+ (last z) 2)))))))))
;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-var'>#&#x27;degeneracy/find-max-dev</span>","value":"#'degeneracy/find-max-dev"}
;; <=

;; **
;;; The above Anglican query is almost exactly like the previous query, which sampled possible paths, with two differences. First, this query takes in an argument, a particular path that we are interested in comparing to every other path. Second, instead of merely returning a sampled path, this query instead returns the maximum distance between the path supplied as argument (which will be the path plotted above) and the sapmled path.
;;; 
;;; This "maximum deviation" between two paths can be understood as the metric induced by the infinity-norm on the space of vectors @@[-2, 2]^T@@. So let's investigate, for our particular path, what the distribution of possible distances looks like:
;; **

;; @@
(def deviations (map :result (take 1000 (doquery :importance find-max-dev [path]))))

(plot/histogram deviations :normalize :probability
                :plot-range [[0 (+ 2 (apply max deviations))] :all])

(str (* 100.
        (/ (count (filter #(<= % 1) deviations)) (count deviations)))
        "%")
;; @@
;; =>
;;; {"type":"list-like","open":"","close":"","separator":"</pre><pre>","items":[{"type":"list-like","open":"","close":"","separator":"</pre><pre>","items":[{"type":"html","content":"<span class='clj-var'>#&#x27;degeneracy/deviations</span>","value":"#'degeneracy/deviations"},{"type":"vega","content":{"width":400,"height":247.2187957763672,"padding":{"top":10,"left":55,"bottom":40,"right":10},"data":[{"name":"16e66110-f5e2-440c-9b6e-69c43b5a4b67","values":[{"x":0,"y":0},{"x":1.828347188110218,"y":0.011},{"x":3.656694376220436,"y":0.102},{"x":5.485041564330654,"y":0.16},{"x":7.313388752440872,"y":0.18},{"x":9.14173594055109,"y":0.226},{"x":10.970083128661308,"y":0.159},{"x":12.798430316771526,"y":0.09},{"x":14.626777504881744,"y":0.048},{"x":16.455124692991962,"y":0.018},{"x":18.28347188110218,"y":0.006},{"x":20.111819069212398,"y":0},{"x":21.940166257322616,"y":0}]}],"marks":[{"type":"line","from":{"data":"16e66110-f5e2-440c-9b6e-69c43b5a4b67"},"properties":{"enter":{"x":{"scale":"x","field":"data.x"},"y":{"scale":"y","field":"data.y"},"interpolate":{"value":"step-before"},"fill":{"value":"steelblue"},"fillOpacity":{"value":0.4},"stroke":{"value":"steelblue"},"strokeWidth":{"value":2},"strokeOpacity":{"value":1}}}}],"scales":[{"name":"x","type":"linear","range":"width","zero":false,"domain":[0,20.111819069212395]},{"name":"y","type":"linear","range":"height","nice":true,"zero":false,"domain":{"data":"16e66110-f5e2-440c-9b6e-69c43b5a4b67","field":"data.y"}}],"axes":[{"type":"x","scale":"x"},{"type":"y","scale":"y"}]},"value":"#gorilla_repl.vega.VegaView{:content {:width 400, :height 247.2188, :padding {:top 10, :left 55, :bottom 40, :right 10}, :data [{:name \"16e66110-f5e2-440c-9b6e-69c43b5a4b67\", :values ({:x 0.0, :y 0} {:x 1.828347188110218, :y 0.011} {:x 3.656694376220436, :y 0.102} {:x 5.485041564330654, :y 0.16} {:x 7.313388752440872, :y 0.18} {:x 9.14173594055109, :y 0.226} {:x 10.970083128661308, :y 0.159} {:x 12.798430316771526, :y 0.09} {:x 14.626777504881744, :y 0.048} {:x 16.455124692991962, :y 0.018} {:x 18.28347188110218, :y 0.006} {:x 20.111819069212398, :y 0.0} {:x 21.940166257322616, :y 0})}], :marks [{:type \"line\", :from {:data \"16e66110-f5e2-440c-9b6e-69c43b5a4b67\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :interpolate {:value \"step-before\"}, :fill {:value \"steelblue\"}, :fillOpacity {:value 0.4}, :stroke {:value \"steelblue\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}}], :scales [{:name \"x\", :type \"linear\", :range \"width\", :zero false, :domain [0 20.111819069212395]} {:name \"y\", :type \"linear\", :range \"height\", :nice true, :zero false, :domain {:data \"16e66110-f5e2-440c-9b6e-69c43b5a4b67\", :field \"data.y\"}}], :axes [{:type \"x\", :scale \"x\"} {:type \"y\", :scale \"y\"}]}}"}],"value":"[#'degeneracy/deviations,#gorilla_repl.vega.VegaView{:content {:width 400, :height 247.2188, :padding {:top 10, :left 55, :bottom 40, :right 10}, :data [{:name \"16e66110-f5e2-440c-9b6e-69c43b5a4b67\", :values ({:x 0.0, :y 0} {:x 1.828347188110218, :y 0.011} {:x 3.656694376220436, :y 0.102} {:x 5.485041564330654, :y 0.16} {:x 7.313388752440872, :y 0.18} {:x 9.14173594055109, :y 0.226} {:x 10.970083128661308, :y 0.159} {:x 12.798430316771526, :y 0.09} {:x 14.626777504881744, :y 0.048} {:x 16.455124692991962, :y 0.018} {:x 18.28347188110218, :y 0.006} {:x 20.111819069212398, :y 0.0} {:x 21.940166257322616, :y 0})}], :marks [{:type \"line\", :from {:data \"16e66110-f5e2-440c-9b6e-69c43b5a4b67\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :interpolate {:value \"step-before\"}, :fill {:value \"steelblue\"}, :fillOpacity {:value 0.4}, :stroke {:value \"steelblue\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}}], :scales [{:name \"x\", :type \"linear\", :range \"width\", :zero false, :domain [0 20.111819069212395]} {:name \"y\", :type \"linear\", :range \"height\", :nice true, :zero false, :domain {:data \"16e66110-f5e2-440c-9b6e-69c43b5a4b67\", :field \"data.y\"}}], :axes [{:type \"x\", :scale \"x\"} {:type \"y\", :scale \"y\"}]}}]"},{"type":"html","content":"<span class='clj-string'>&quot;0.0%&quot;</span>","value":"\"0.0%\""}],"value":"[[#'degeneracy/deviations,#gorilla_repl.vega.VegaView{:content {:width 400, :height 247.2188, :padding {:top 10, :left 55, :bottom 40, :right 10}, :data [{:name \"16e66110-f5e2-440c-9b6e-69c43b5a4b67\", :values ({:x 0.0, :y 0} {:x 1.828347188110218, :y 0.011} {:x 3.656694376220436, :y 0.102} {:x 5.485041564330654, :y 0.16} {:x 7.313388752440872, :y 0.18} {:x 9.14173594055109, :y 0.226} {:x 10.970083128661308, :y 0.159} {:x 12.798430316771526, :y 0.09} {:x 14.626777504881744, :y 0.048} {:x 16.455124692991962, :y 0.018} {:x 18.28347188110218, :y 0.006} {:x 20.111819069212398, :y 0.0} {:x 21.940166257322616, :y 0})}], :marks [{:type \"line\", :from {:data \"16e66110-f5e2-440c-9b6e-69c43b5a4b67\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :interpolate {:value \"step-before\"}, :fill {:value \"steelblue\"}, :fillOpacity {:value 0.4}, :stroke {:value \"steelblue\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}}], :scales [{:name \"x\", :type \"linear\", :range \"width\", :zero false, :domain [0 20.111819069212395]} {:name \"y\", :type \"linear\", :range \"height\", :nice true, :zero false, :domain {:data \"16e66110-f5e2-440c-9b6e-69c43b5a4b67\", :field \"data.y\"}}], :axes [{:type \"x\", :scale \"x\"} {:type \"y\", :scale \"y\"}]}}],\"0.0%\"]"}
;; <=

;; **
;;; The important thing to notice here is that the vast majority of paths are not overwhelmingly far away from our selected path, but also not particularly close. Only a tiny, tiny fraction of possible paths are consistently within 1 of our chosen path - this number is given above, below the plotted graph.
;;; 
;;; (The particular number depends on how unlikely our chosen path is. It's quite likely that you actually didn't sample *any* paths that are "close" to the selected path, so the estimated fraction of "close" paths is zero.)
;; **

;; **
;;; Next, consider the following variant of the problem:
;;; 
;;; $$ z\_0 \sim U(-2, 2) $$
;;; $$ z\_t | z\_{t-1} \sim U(z\_{t-1} - 2, z\_{t-1} + 2) $$
;;; $$ x\_t | z\_t \sim N\left(z\_t, \frac{1}{3}\right) $$
;;; 
;;; In this model, we still simulate a random sequence @@ \\{ z\_t \\} \_{t=0}^{T-1} @@, but now we assume access, at each step, to normal observations of the true state. These normal observations are assumed to have standard deviation 1/3. This is now a uniform random walk with Gaussian observations - a state-space model.
;;; 
;;; These noisy measurements give us a lot of information about the true, unseen state of the uniform random walk @@z\_t@@. As is our wont in probabilistic programming, we make use of this information by approximating the posterior distribution over trajectories @@ p(z\_0, ..., z\_{T-1} | x\_0, ..., x\_{T-1}) @@.
;;; 
;;; We represent this model as the following query:
;; **

;; @@
(defquery uniform-rw-obs [x]
  (let [T (count x)
        z0 (sample (uniform-continuous -2 2))]
    (observe (normal z0 (/ 1 3)) (first x))

    (loop [t 1
           z [z0]]

      (if (= t T)
        z

        (let [prev (last z)
              zt (sample (uniform-continuous (- prev 2) (+ prev 2)))
              xt (nth x t)]
          (observe (normal zt (/ 1 3)) xt)
          (recur (+ t 1)
                 (conj z zt)))))))
;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-var'>#&#x27;degeneracy/uniform-rw-obs</span>","value":"#'degeneracy/uniform-rw-obs"}
;; <=

;; **
;;; As the path of observations to condition upon @@\\{x\_t\\}\_{t=0}^{T-1}@@, we'll just use our randomly-sampled path from before - that is, the sequence `path`.
;;; 
;;; Now, we perform inference and inspect the results - specifically, the estimated probabilities of these results, according to the importance-sampling algorithm:
;; **

;; @@
(def is-results (take 1000 (doquery :importance uniform-rw-obs [path])))

(def samples (map :result is-results))

(def unnormalized-weights (map #(Math/exp (:log-weight %)) is-results))

(def weights
  (let [sum (apply + unnormalized-weights)]
    (map #(/ % sum) unnormalized-weights)))

(plot/histogram weights :bins 100)

(str (* 100.
        (/ (count (filter #(> % 0.01) weights)) (count weights)))
     "%")

;; @@
;; =>
;;; {"type":"list-like","open":"","close":"","separator":"</pre><pre>","items":[{"type":"list-like","open":"","close":"","separator":"</pre><pre>","items":[{"type":"list-like","open":"","close":"","separator":"</pre><pre>","items":[{"type":"list-like","open":"","close":"","separator":"</pre><pre>","items":[{"type":"list-like","open":"","close":"","separator":"</pre><pre>","items":[{"type":"html","content":"<span class='clj-var'>#&#x27;degeneracy/is-results</span>","value":"#'degeneracy/is-results"},{"type":"html","content":"<span class='clj-var'>#&#x27;degeneracy/samples</span>","value":"#'degeneracy/samples"}],"value":"[#'degeneracy/is-results,#'degeneracy/samples]"},{"type":"html","content":"<span class='clj-var'>#&#x27;degeneracy/unnormalized-weights</span>","value":"#'degeneracy/unnormalized-weights"}],"value":"[[#'degeneracy/is-results,#'degeneracy/samples],#'degeneracy/unnormalized-weights]"},{"type":"html","content":"<span class='clj-var'>#&#x27;degeneracy/weights</span>","value":"#'degeneracy/weights"}],"value":"[[[#'degeneracy/is-results,#'degeneracy/samples],#'degeneracy/unnormalized-weights],#'degeneracy/weights]"},{"type":"vega","content":{"width":400,"height":247.2187957763672,"padding":{"top":10,"left":55,"bottom":40,"right":10},"data":[{"name":"d44abd4b-ad78-465b-998c-92b74ca27044","values":[{"x":0,"y":0},{"x":0.006983995122458377,"y":997},{"x":0.013967990244916755,"y":1},{"x":0.020951985367375133,"y":0},{"x":0.02793598048983351,"y":0},{"x":0.03491997561229189,"y":0},{"x":0.041903970734750266,"y":0},{"x":0.04888796585720864,"y":0},{"x":0.05587196097966702,"y":0},{"x":0.0628559561021254,"y":0},{"x":0.06983995122458378,"y":0},{"x":0.07682394634704216,"y":0},{"x":0.08380794146950055,"y":0},{"x":0.09079193659195893,"y":0},{"x":0.09777593171441731,"y":0},{"x":0.1047599268368757,"y":0},{"x":0.11174392195933408,"y":0},{"x":0.11872791708179246,"y":0},{"x":0.12571191220425085,"y":0},{"x":0.13269590732670922,"y":0},{"x":0.1396799024491676,"y":0},{"x":0.14666389757162596,"y":0},{"x":0.15364789269408433,"y":0},{"x":0.1606318878165427,"y":0},{"x":0.16761588293900107,"y":0},{"x":0.17459987806145943,"y":0},{"x":0.1815838731839178,"y":0},{"x":0.18856786830637617,"y":0},{"x":0.19555186342883454,"y":0},{"x":0.2025358585512929,"y":0},{"x":0.20951985367375128,"y":0},{"x":0.21650384879620965,"y":0},{"x":0.22348784391866802,"y":0},{"x":0.2304718390411264,"y":0},{"x":0.23745583416358476,"y":0},{"x":0.24443982928604313,"y":0},{"x":0.25142382440850153,"y":0},{"x":0.2584078195309599,"y":0},{"x":0.2653918146534183,"y":0},{"x":0.2723758097758767,"y":0},{"x":0.2793598048983351,"y":0},{"x":0.2863438000207935,"y":1},{"x":0.2933277951432519,"y":0},{"x":0.3003117902657103,"y":0},{"x":0.3072957853881687,"y":0},{"x":0.3142797805106271,"y":0},{"x":0.3212637756330855,"y":0},{"x":0.3282477707555439,"y":0},{"x":0.3352317658780023,"y":0},{"x":0.3422157610004607,"y":0},{"x":0.3491997561229191,"y":0},{"x":0.3561837512453775,"y":0},{"x":0.3631677463678359,"y":0},{"x":0.3701517414902943,"y":0},{"x":0.3771357366127527,"y":0},{"x":0.3841197317352111,"y":0},{"x":0.3911037268576695,"y":0},{"x":0.3980877219801279,"y":0},{"x":0.40507171710258627,"y":0},{"x":0.41205571222504467,"y":0},{"x":0.41903970734750307,"y":0},{"x":0.42602370246996146,"y":0},{"x":0.43300769759241986,"y":0},{"x":0.43999169271487826,"y":0},{"x":0.44697568783733665,"y":0},{"x":0.45395968295979505,"y":0},{"x":0.46094367808225345,"y":0},{"x":0.46792767320471185,"y":0},{"x":0.47491166832717024,"y":0},{"x":0.48189566344962864,"y":0},{"x":0.48887965857208704,"y":0},{"x":0.49586365369454544,"y":0},{"x":0.5028476488170038,"y":0},{"x":0.5098316439394622,"y":0},{"x":0.5168156390619206,"y":0},{"x":0.523799634184379,"y":0},{"x":0.5307836293068374,"y":0},{"x":0.5377676244292958,"y":0},{"x":0.5447516195517542,"y":0},{"x":0.5517356146742126,"y":0},{"x":0.558719609796671,"y":0},{"x":0.5657036049191294,"y":0},{"x":0.5726876000415878,"y":0},{"x":0.5796715951640462,"y":0},{"x":0.5866555902865046,"y":0},{"x":0.593639585408963,"y":0},{"x":0.6006235805314214,"y":0},{"x":0.6076075756538798,"y":0},{"x":0.6145915707763382,"y":0},{"x":0.6215755658987966,"y":0},{"x":0.628559561021255,"y":0},{"x":0.6355435561437134,"y":0},{"x":0.6425275512661718,"y":0},{"x":0.6495115463886302,"y":0},{"x":0.6564955415110886,"y":0},{"x":0.663479536633547,"y":0},{"x":0.6704635317560054,"y":0},{"x":0.6774475268784638,"y":0},{"x":0.6844315220009222,"y":0},{"x":0.6914155171233806,"y":0},{"x":0.698399512245839,"y":1},{"x":0.7053835073682974,"y":0}]}],"marks":[{"type":"line","from":{"data":"d44abd4b-ad78-465b-998c-92b74ca27044"},"properties":{"enter":{"x":{"scale":"x","field":"data.x"},"y":{"scale":"y","field":"data.y"},"interpolate":{"value":"step-before"},"fill":{"value":"steelblue"},"fillOpacity":{"value":0.4},"stroke":{"value":"steelblue"},"strokeWidth":{"value":2},"strokeOpacity":{"value":1}}}}],"scales":[{"name":"x","type":"linear","range":"width","zero":false,"domain":{"data":"d44abd4b-ad78-465b-998c-92b74ca27044","field":"data.x"}},{"name":"y","type":"linear","range":"height","nice":true,"zero":false,"domain":{"data":"d44abd4b-ad78-465b-998c-92b74ca27044","field":"data.y"}}],"axes":[{"type":"x","scale":"x"},{"type":"y","scale":"y"}]},"value":"#gorilla_repl.vega.VegaView{:content {:width 400, :height 247.2188, :padding {:top 10, :left 55, :bottom 40, :right 10}, :data [{:name \"d44abd4b-ad78-465b-998c-92b74ca27044\", :values ({:x 0.0, :y 0} {:x 0.006983995122458377, :y 997.0} {:x 0.013967990244916755, :y 1.0} {:x 0.020951985367375133, :y 0.0} {:x 0.02793598048983351, :y 0.0} {:x 0.03491997561229189, :y 0.0} {:x 0.041903970734750266, :y 0.0} {:x 0.04888796585720864, :y 0.0} {:x 0.05587196097966702, :y 0.0} {:x 0.0628559561021254, :y 0.0} {:x 0.06983995122458378, :y 0.0} {:x 0.07682394634704216, :y 0.0} {:x 0.08380794146950055, :y 0.0} {:x 0.09079193659195893, :y 0.0} {:x 0.09777593171441731, :y 0.0} {:x 0.1047599268368757, :y 0.0} {:x 0.11174392195933408, :y 0.0} {:x 0.11872791708179246, :y 0.0} {:x 0.12571191220425085, :y 0.0} {:x 0.13269590732670922, :y 0.0} {:x 0.1396799024491676, :y 0.0} {:x 0.14666389757162596, :y 0.0} {:x 0.15364789269408433, :y 0.0} {:x 0.1606318878165427, :y 0.0} {:x 0.16761588293900107, :y 0.0} {:x 0.17459987806145943, :y 0.0} {:x 0.1815838731839178, :y 0.0} {:x 0.18856786830637617, :y 0.0} {:x 0.19555186342883454, :y 0.0} {:x 0.2025358585512929, :y 0.0} {:x 0.20951985367375128, :y 0.0} {:x 0.21650384879620965, :y 0.0} {:x 0.22348784391866802, :y 0.0} {:x 0.2304718390411264, :y 0.0} {:x 0.23745583416358476, :y 0.0} {:x 0.24443982928604313, :y 0.0} {:x 0.25142382440850153, :y 0.0} {:x 0.2584078195309599, :y 0.0} {:x 0.2653918146534183, :y 0.0} {:x 0.2723758097758767, :y 0.0} {:x 0.2793598048983351, :y 0.0} {:x 0.2863438000207935, :y 1.0} {:x 0.2933277951432519, :y 0.0} {:x 0.3003117902657103, :y 0.0} {:x 0.3072957853881687, :y 0.0} {:x 0.3142797805106271, :y 0.0} {:x 0.3212637756330855, :y 0.0} {:x 0.3282477707555439, :y 0.0} {:x 0.3352317658780023, :y 0.0} {:x 0.3422157610004607, :y 0.0} {:x 0.3491997561229191, :y 0.0} {:x 0.3561837512453775, :y 0.0} {:x 0.3631677463678359, :y 0.0} {:x 0.3701517414902943, :y 0.0} {:x 0.3771357366127527, :y 0.0} {:x 0.3841197317352111, :y 0.0} {:x 0.3911037268576695, :y 0.0} {:x 0.3980877219801279, :y 0.0} {:x 0.40507171710258627, :y 0.0} {:x 0.41205571222504467, :y 0.0} {:x 0.41903970734750307, :y 0.0} {:x 0.42602370246996146, :y 0.0} {:x 0.43300769759241986, :y 0.0} {:x 0.43999169271487826, :y 0.0} {:x 0.44697568783733665, :y 0.0} {:x 0.45395968295979505, :y 0.0} {:x 0.46094367808225345, :y 0.0} {:x 0.46792767320471185, :y 0.0} {:x 0.47491166832717024, :y 0.0} {:x 0.48189566344962864, :y 0.0} {:x 0.48887965857208704, :y 0.0} {:x 0.49586365369454544, :y 0.0} {:x 0.5028476488170038, :y 0.0} {:x 0.5098316439394622, :y 0.0} {:x 0.5168156390619206, :y 0.0} {:x 0.523799634184379, :y 0.0} {:x 0.5307836293068374, :y 0.0} {:x 0.5377676244292958, :y 0.0} {:x 0.5447516195517542, :y 0.0} {:x 0.5517356146742126, :y 0.0} {:x 0.558719609796671, :y 0.0} {:x 0.5657036049191294, :y 0.0} {:x 0.5726876000415878, :y 0.0} {:x 0.5796715951640462, :y 0.0} {:x 0.5866555902865046, :y 0.0} {:x 0.593639585408963, :y 0.0} {:x 0.6006235805314214, :y 0.0} {:x 0.6076075756538798, :y 0.0} {:x 0.6145915707763382, :y 0.0} {:x 0.6215755658987966, :y 0.0} {:x 0.628559561021255, :y 0.0} {:x 0.6355435561437134, :y 0.0} {:x 0.6425275512661718, :y 0.0} {:x 0.6495115463886302, :y 0.0} {:x 0.6564955415110886, :y 0.0} {:x 0.663479536633547, :y 0.0} {:x 0.6704635317560054, :y 0.0} {:x 0.6774475268784638, :y 0.0} {:x 0.6844315220009222, :y 0.0} {:x 0.6914155171233806, :y 0.0} {:x 0.698399512245839, :y 1.0} {:x 0.7053835073682974, :y 0})}], :marks [{:type \"line\", :from {:data \"d44abd4b-ad78-465b-998c-92b74ca27044\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :interpolate {:value \"step-before\"}, :fill {:value \"steelblue\"}, :fillOpacity {:value 0.4}, :stroke {:value \"steelblue\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}}], :scales [{:name \"x\", :type \"linear\", :range \"width\", :zero false, :domain {:data \"d44abd4b-ad78-465b-998c-92b74ca27044\", :field \"data.x\"}} {:name \"y\", :type \"linear\", :range \"height\", :nice true, :zero false, :domain {:data \"d44abd4b-ad78-465b-998c-92b74ca27044\", :field \"data.y\"}}], :axes [{:type \"x\", :scale \"x\"} {:type \"y\", :scale \"y\"}]}}"}],"value":"[[[[#'degeneracy/is-results,#'degeneracy/samples],#'degeneracy/unnormalized-weights],#'degeneracy/weights],#gorilla_repl.vega.VegaView{:content {:width 400, :height 247.2188, :padding {:top 10, :left 55, :bottom 40, :right 10}, :data [{:name \"d44abd4b-ad78-465b-998c-92b74ca27044\", :values ({:x 0.0, :y 0} {:x 0.006983995122458377, :y 997.0} {:x 0.013967990244916755, :y 1.0} {:x 0.020951985367375133, :y 0.0} {:x 0.02793598048983351, :y 0.0} {:x 0.03491997561229189, :y 0.0} {:x 0.041903970734750266, :y 0.0} {:x 0.04888796585720864, :y 0.0} {:x 0.05587196097966702, :y 0.0} {:x 0.0628559561021254, :y 0.0} {:x 0.06983995122458378, :y 0.0} {:x 0.07682394634704216, :y 0.0} {:x 0.08380794146950055, :y 0.0} {:x 0.09079193659195893, :y 0.0} {:x 0.09777593171441731, :y 0.0} {:x 0.1047599268368757, :y 0.0} {:x 0.11174392195933408, :y 0.0} {:x 0.11872791708179246, :y 0.0} {:x 0.12571191220425085, :y 0.0} {:x 0.13269590732670922, :y 0.0} {:x 0.1396799024491676, :y 0.0} {:x 0.14666389757162596, :y 0.0} {:x 0.15364789269408433, :y 0.0} {:x 0.1606318878165427, :y 0.0} {:x 0.16761588293900107, :y 0.0} {:x 0.17459987806145943, :y 0.0} {:x 0.1815838731839178, :y 0.0} {:x 0.18856786830637617, :y 0.0} {:x 0.19555186342883454, :y 0.0} {:x 0.2025358585512929, :y 0.0} {:x 0.20951985367375128, :y 0.0} {:x 0.21650384879620965, :y 0.0} {:x 0.22348784391866802, :y 0.0} {:x 0.2304718390411264, :y 0.0} {:x 0.23745583416358476, :y 0.0} {:x 0.24443982928604313, :y 0.0} {:x 0.25142382440850153, :y 0.0} {:x 0.2584078195309599, :y 0.0} {:x 0.2653918146534183, :y 0.0} {:x 0.2723758097758767, :y 0.0} {:x 0.2793598048983351, :y 0.0} {:x 0.2863438000207935, :y 1.0} {:x 0.2933277951432519, :y 0.0} {:x 0.3003117902657103, :y 0.0} {:x 0.3072957853881687, :y 0.0} {:x 0.3142797805106271, :y 0.0} {:x 0.3212637756330855, :y 0.0} {:x 0.3282477707555439, :y 0.0} {:x 0.3352317658780023, :y 0.0} {:x 0.3422157610004607, :y 0.0} {:x 0.3491997561229191, :y 0.0} {:x 0.3561837512453775, :y 0.0} {:x 0.3631677463678359, :y 0.0} {:x 0.3701517414902943, :y 0.0} {:x 0.3771357366127527, :y 0.0} {:x 0.3841197317352111, :y 0.0} {:x 0.3911037268576695, :y 0.0} {:x 0.3980877219801279, :y 0.0} {:x 0.40507171710258627, :y 0.0} {:x 0.41205571222504467, :y 0.0} {:x 0.41903970734750307, :y 0.0} {:x 0.42602370246996146, :y 0.0} {:x 0.43300769759241986, :y 0.0} {:x 0.43999169271487826, :y 0.0} {:x 0.44697568783733665, :y 0.0} {:x 0.45395968295979505, :y 0.0} {:x 0.46094367808225345, :y 0.0} {:x 0.46792767320471185, :y 0.0} {:x 0.47491166832717024, :y 0.0} {:x 0.48189566344962864, :y 0.0} {:x 0.48887965857208704, :y 0.0} {:x 0.49586365369454544, :y 0.0} {:x 0.5028476488170038, :y 0.0} {:x 0.5098316439394622, :y 0.0} {:x 0.5168156390619206, :y 0.0} {:x 0.523799634184379, :y 0.0} {:x 0.5307836293068374, :y 0.0} {:x 0.5377676244292958, :y 0.0} {:x 0.5447516195517542, :y 0.0} {:x 0.5517356146742126, :y 0.0} {:x 0.558719609796671, :y 0.0} {:x 0.5657036049191294, :y 0.0} {:x 0.5726876000415878, :y 0.0} {:x 0.5796715951640462, :y 0.0} {:x 0.5866555902865046, :y 0.0} {:x 0.593639585408963, :y 0.0} {:x 0.6006235805314214, :y 0.0} {:x 0.6076075756538798, :y 0.0} {:x 0.6145915707763382, :y 0.0} {:x 0.6215755658987966, :y 0.0} {:x 0.628559561021255, :y 0.0} {:x 0.6355435561437134, :y 0.0} {:x 0.6425275512661718, :y 0.0} {:x 0.6495115463886302, :y 0.0} {:x 0.6564955415110886, :y 0.0} {:x 0.663479536633547, :y 0.0} {:x 0.6704635317560054, :y 0.0} {:x 0.6774475268784638, :y 0.0} {:x 0.6844315220009222, :y 0.0} {:x 0.6914155171233806, :y 0.0} {:x 0.698399512245839, :y 1.0} {:x 0.7053835073682974, :y 0})}], :marks [{:type \"line\", :from {:data \"d44abd4b-ad78-465b-998c-92b74ca27044\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :interpolate {:value \"step-before\"}, :fill {:value \"steelblue\"}, :fillOpacity {:value 0.4}, :stroke {:value \"steelblue\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}}], :scales [{:name \"x\", :type \"linear\", :range \"width\", :zero false, :domain {:data \"d44abd4b-ad78-465b-998c-92b74ca27044\", :field \"data.x\"}} {:name \"y\", :type \"linear\", :range \"height\", :nice true, :zero false, :domain {:data \"d44abd4b-ad78-465b-998c-92b74ca27044\", :field \"data.y\"}}], :axes [{:type \"x\", :scale \"x\"} {:type \"y\", :scale \"y\"}]}}]"},{"type":"html","content":"<span class='clj-string'>&quot;0.3%&quot;</span>","value":"\"0.3%\""}],"value":"[[[[[#'degeneracy/is-results,#'degeneracy/samples],#'degeneracy/unnormalized-weights],#'degeneracy/weights],#gorilla_repl.vega.VegaView{:content {:width 400, :height 247.2188, :padding {:top 10, :left 55, :bottom 40, :right 10}, :data [{:name \"d44abd4b-ad78-465b-998c-92b74ca27044\", :values ({:x 0.0, :y 0} {:x 0.006983995122458377, :y 997.0} {:x 0.013967990244916755, :y 1.0} {:x 0.020951985367375133, :y 0.0} {:x 0.02793598048983351, :y 0.0} {:x 0.03491997561229189, :y 0.0} {:x 0.041903970734750266, :y 0.0} {:x 0.04888796585720864, :y 0.0} {:x 0.05587196097966702, :y 0.0} {:x 0.0628559561021254, :y 0.0} {:x 0.06983995122458378, :y 0.0} {:x 0.07682394634704216, :y 0.0} {:x 0.08380794146950055, :y 0.0} {:x 0.09079193659195893, :y 0.0} {:x 0.09777593171441731, :y 0.0} {:x 0.1047599268368757, :y 0.0} {:x 0.11174392195933408, :y 0.0} {:x 0.11872791708179246, :y 0.0} {:x 0.12571191220425085, :y 0.0} {:x 0.13269590732670922, :y 0.0} {:x 0.1396799024491676, :y 0.0} {:x 0.14666389757162596, :y 0.0} {:x 0.15364789269408433, :y 0.0} {:x 0.1606318878165427, :y 0.0} {:x 0.16761588293900107, :y 0.0} {:x 0.17459987806145943, :y 0.0} {:x 0.1815838731839178, :y 0.0} {:x 0.18856786830637617, :y 0.0} {:x 0.19555186342883454, :y 0.0} {:x 0.2025358585512929, :y 0.0} {:x 0.20951985367375128, :y 0.0} {:x 0.21650384879620965, :y 0.0} {:x 0.22348784391866802, :y 0.0} {:x 0.2304718390411264, :y 0.0} {:x 0.23745583416358476, :y 0.0} {:x 0.24443982928604313, :y 0.0} {:x 0.25142382440850153, :y 0.0} {:x 0.2584078195309599, :y 0.0} {:x 0.2653918146534183, :y 0.0} {:x 0.2723758097758767, :y 0.0} {:x 0.2793598048983351, :y 0.0} {:x 0.2863438000207935, :y 1.0} {:x 0.2933277951432519, :y 0.0} {:x 0.3003117902657103, :y 0.0} {:x 0.3072957853881687, :y 0.0} {:x 0.3142797805106271, :y 0.0} {:x 0.3212637756330855, :y 0.0} {:x 0.3282477707555439, :y 0.0} {:x 0.3352317658780023, :y 0.0} {:x 0.3422157610004607, :y 0.0} {:x 0.3491997561229191, :y 0.0} {:x 0.3561837512453775, :y 0.0} {:x 0.3631677463678359, :y 0.0} {:x 0.3701517414902943, :y 0.0} {:x 0.3771357366127527, :y 0.0} {:x 0.3841197317352111, :y 0.0} {:x 0.3911037268576695, :y 0.0} {:x 0.3980877219801279, :y 0.0} {:x 0.40507171710258627, :y 0.0} {:x 0.41205571222504467, :y 0.0} {:x 0.41903970734750307, :y 0.0} {:x 0.42602370246996146, :y 0.0} {:x 0.43300769759241986, :y 0.0} {:x 0.43999169271487826, :y 0.0} {:x 0.44697568783733665, :y 0.0} {:x 0.45395968295979505, :y 0.0} {:x 0.46094367808225345, :y 0.0} {:x 0.46792767320471185, :y 0.0} {:x 0.47491166832717024, :y 0.0} {:x 0.48189566344962864, :y 0.0} {:x 0.48887965857208704, :y 0.0} {:x 0.49586365369454544, :y 0.0} {:x 0.5028476488170038, :y 0.0} {:x 0.5098316439394622, :y 0.0} {:x 0.5168156390619206, :y 0.0} {:x 0.523799634184379, :y 0.0} {:x 0.5307836293068374, :y 0.0} {:x 0.5377676244292958, :y 0.0} {:x 0.5447516195517542, :y 0.0} {:x 0.5517356146742126, :y 0.0} {:x 0.558719609796671, :y 0.0} {:x 0.5657036049191294, :y 0.0} {:x 0.5726876000415878, :y 0.0} {:x 0.5796715951640462, :y 0.0} {:x 0.5866555902865046, :y 0.0} {:x 0.593639585408963, :y 0.0} {:x 0.6006235805314214, :y 0.0} {:x 0.6076075756538798, :y 0.0} {:x 0.6145915707763382, :y 0.0} {:x 0.6215755658987966, :y 0.0} {:x 0.628559561021255, :y 0.0} {:x 0.6355435561437134, :y 0.0} {:x 0.6425275512661718, :y 0.0} {:x 0.6495115463886302, :y 0.0} {:x 0.6564955415110886, :y 0.0} {:x 0.663479536633547, :y 0.0} {:x 0.6704635317560054, :y 0.0} {:x 0.6774475268784638, :y 0.0} {:x 0.6844315220009222, :y 0.0} {:x 0.6914155171233806, :y 0.0} {:x 0.698399512245839, :y 1.0} {:x 0.7053835073682974, :y 0})}], :marks [{:type \"line\", :from {:data \"d44abd4b-ad78-465b-998c-92b74ca27044\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :interpolate {:value \"step-before\"}, :fill {:value \"steelblue\"}, :fillOpacity {:value 0.4}, :stroke {:value \"steelblue\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}}], :scales [{:name \"x\", :type \"linear\", :range \"width\", :zero false, :domain {:data \"d44abd4b-ad78-465b-998c-92b74ca27044\", :field \"data.x\"}} {:name \"y\", :type \"linear\", :range \"height\", :nice true, :zero false, :domain {:data \"d44abd4b-ad78-465b-998c-92b74ca27044\", :field \"data.y\"}}], :axes [{:type \"x\", :scale \"x\"} {:type \"y\", :scale \"y\"}]}}],\"0.3%\"]"}
;; <=

;; **
;;; This is a problem. The above result tells us that only an excruciatingly small fraction of the samples we took were even *vaguely* close to the observations we fed in. Essentially, as we can see in this graph, every single sample other than the vanishingly small percentage shown above is completely useless, in the sense that it doesn't give us any valid information about the posterior distribution @@p(z\_0, ..., z\_{T-1} | x\_0, ..., x\_{T-1})@@, our ultimate goal. Because we know that the true posterior distribution should be smooth, being formed by conditioning a Gaussian observation on a uniform prior, this implies that our inference algorithm, importance sampling, resoundingly did not work - that our estimate of the posterior distribution is almost certainly *way* off.
;;; 
;;; The following graph shows the five sampled trajectories assigned highest probability, in pink, to compare how close they are to the true observations (in blue):
;; **

;; @@
(def best (map :result (take 5
                             (sort-by :log-weight > is-results))))

(apply plot/compose 
       (conj 
         (map
           #(plot/list-plot % :joined :true :plot-range [[0 (- T 1)] :all] :color "pink")
           best)
         (plot/list-plot path :joined :true :plot-range [[0 (- T 1)] :all] :color "blue")))
;; @@
;; =>
;;; {"type":"list-like","open":"","close":"","separator":"</pre><pre>","items":[{"type":"html","content":"<span class='clj-var'>#&#x27;degeneracy/best</span>","value":"#'degeneracy/best"},{"type":"vega","content":{"width":400,"height":247.2187957763672,"padding":{"top":10,"left":55,"bottom":40,"right":10},"scales":[{"name":"x","type":"linear","range":"width","zero":false,"domain":[0,9]},{"name":"y","type":"linear","range":"height","nice":true,"zero":false,"domain":{"data":"0c8e2d2f-ad74-45d1-a199-26a975af01be","field":"data.y"}}],"axes":[{"type":"x","scale":"x"},{"type":"y","scale":"y"}],"data":[{"name":"0c8e2d2f-ad74-45d1-a199-26a975af01be","values":[{"x":0,"y":-0.39901273345316834},{"x":1,"y":-1.754862237200335},{"x":2,"y":-1.2299846485415333},{"x":3,"y":-2.9735084892368135},{"x":4,"y":-3.9381959046328765},{"x":5,"y":-4.078505261588908},{"x":6,"y":-5.175221781063404},{"x":7,"y":-6.370083609952889},{"x":8,"y":-7.411701030389484},{"x":9,"y":-6.8566537652128545}]},{"name":"23b99dc2-019f-488b-bd5b-cc27a9a39993","values":[{"x":0,"y":-0.7278883302739594},{"x":1,"y":-2.0371885338510802},{"x":2,"y":-2.3921991508572793},{"x":3,"y":-2.0348883702998712},{"x":4,"y":-3.4162230638105395},{"x":5,"y":-2.7489840526197504},{"x":6,"y":-3.991756208230428},{"x":7,"y":-5.948424459380587},{"x":8,"y":-7.563256715337136},{"x":9,"y":-7.359257985555489}]},{"name":"4e779c91-80ff-4fc5-bf77-4a7746c24f1f","values":[{"x":0,"y":-0.8624537663906322},{"x":1,"y":-1.891703628969677},{"x":2,"y":-3.5960984831321845},{"x":3,"y":-3.065887983292625},{"x":4,"y":-4.293568622966322},{"x":5,"y":-4.270131377266619},{"x":6,"y":-5.3073515059591925},{"x":7,"y":-6.745491316129961},{"x":8,"y":-7.182448891553571},{"x":9,"y":-7.405122084980102}]},{"name":"7d59a97f-c141-45e9-8e93-ce59e87df8a7","values":[{"x":0,"y":-1.1444165152109953},{"x":1,"y":-2.2374564266438},{"x":2,"y":-3.078896562669847},{"x":3,"y":-2.7746752730618605},{"x":4,"y":-3.3150182542785194},{"x":5,"y":-4.099493724405811},{"x":6,"y":-4.305296571810868},{"x":7,"y":-5.062640222044679},{"x":8,"y":-7.054637019727089},{"x":9,"y":-6.7330331019320795}]},{"name":"c70de99f-ae5b-4cf0-8cdb-7a914b8c8ff4","values":[{"x":0,"y":-0.1779826471986885},{"x":1,"y":-2.1375727863254808},{"x":2,"y":-2.889582297083468},{"x":3,"y":-3.986045264741625},{"x":4,"y":-5.015607483874858},{"x":5,"y":-4.773820428063763},{"x":6,"y":-6.089576695846606},{"x":7,"y":-6.114816803298435},{"x":8,"y":-6.571831508615672},{"x":9,"y":-6.43756100251909}]},{"name":"f3368055-1fbd-48db-9080-56479728c71f","values":[{"x":0,"y":-0.9215599018644767},{"x":1,"y":-1.5969930701371382},{"x":2,"y":-1.2984209298055642},{"x":3,"y":-2.6409759862453708},{"x":4,"y":-4.217114779821871},{"x":5,"y":-4.176155358412092},{"x":6,"y":-4.02457066760655},{"x":7,"y":-5.076831047501395},{"x":8,"y":-5.417578008400817},{"x":9,"y":-7.1914315628997345}]}],"marks":[{"type":"line","from":{"data":"0c8e2d2f-ad74-45d1-a199-26a975af01be"},"properties":{"enter":{"x":{"scale":"x","field":"data.x"},"y":{"scale":"y","field":"data.y"},"stroke":{"value":"blue"},"strokeWidth":{"value":2},"strokeOpacity":{"value":1}}}},{"type":"line","from":{"data":"23b99dc2-019f-488b-bd5b-cc27a9a39993"},"properties":{"enter":{"x":{"scale":"x","field":"data.x"},"y":{"scale":"y","field":"data.y"},"stroke":{"value":"pink"},"strokeWidth":{"value":2},"strokeOpacity":{"value":1}}}},{"type":"line","from":{"data":"4e779c91-80ff-4fc5-bf77-4a7746c24f1f"},"properties":{"enter":{"x":{"scale":"x","field":"data.x"},"y":{"scale":"y","field":"data.y"},"stroke":{"value":"pink"},"strokeWidth":{"value":2},"strokeOpacity":{"value":1}}}},{"type":"line","from":{"data":"7d59a97f-c141-45e9-8e93-ce59e87df8a7"},"properties":{"enter":{"x":{"scale":"x","field":"data.x"},"y":{"scale":"y","field":"data.y"},"stroke":{"value":"pink"},"strokeWidth":{"value":2},"strokeOpacity":{"value":1}}}},{"type":"line","from":{"data":"c70de99f-ae5b-4cf0-8cdb-7a914b8c8ff4"},"properties":{"enter":{"x":{"scale":"x","field":"data.x"},"y":{"scale":"y","field":"data.y"},"stroke":{"value":"pink"},"strokeWidth":{"value":2},"strokeOpacity":{"value":1}}}},{"type":"line","from":{"data":"f3368055-1fbd-48db-9080-56479728c71f"},"properties":{"enter":{"x":{"scale":"x","field":"data.x"},"y":{"scale":"y","field":"data.y"},"stroke":{"value":"pink"},"strokeWidth":{"value":2},"strokeOpacity":{"value":1}}}}]},"value":"#gorilla_repl.vega.VegaView{:content {:width 400, :height 247.2188, :padding {:top 10, :left 55, :bottom 40, :right 10}, :scales [{:name \"x\", :type \"linear\", :range \"width\", :zero false, :domain [0 9]} {:name \"y\", :type \"linear\", :range \"height\", :nice true, :zero false, :domain {:data \"0c8e2d2f-ad74-45d1-a199-26a975af01be\", :field \"data.y\"}}], :axes [{:type \"x\", :scale \"x\"} {:type \"y\", :scale \"y\"}], :data ({:name \"0c8e2d2f-ad74-45d1-a199-26a975af01be\", :values ({:x 0, :y -0.39901273345316834} {:x 1, :y -1.754862237200335} {:x 2, :y -1.2299846485415333} {:x 3, :y -2.9735084892368135} {:x 4, :y -3.9381959046328765} {:x 5, :y -4.078505261588908} {:x 6, :y -5.175221781063404} {:x 7, :y -6.370083609952889} {:x 8, :y -7.411701030389484} {:x 9, :y -6.8566537652128545})} {:name \"23b99dc2-019f-488b-bd5b-cc27a9a39993\", :values ({:x 0, :y -0.7278883302739594} {:x 1, :y -2.0371885338510802} {:x 2, :y -2.3921991508572793} {:x 3, :y -2.0348883702998712} {:x 4, :y -3.4162230638105395} {:x 5, :y -2.7489840526197504} {:x 6, :y -3.991756208230428} {:x 7, :y -5.948424459380587} {:x 8, :y -7.563256715337136} {:x 9, :y -7.359257985555489})} {:name \"4e779c91-80ff-4fc5-bf77-4a7746c24f1f\", :values ({:x 0, :y -0.8624537663906322} {:x 1, :y -1.891703628969677} {:x 2, :y -3.5960984831321845} {:x 3, :y -3.065887983292625} {:x 4, :y -4.293568622966322} {:x 5, :y -4.270131377266619} {:x 6, :y -5.3073515059591925} {:x 7, :y -6.745491316129961} {:x 8, :y -7.182448891553571} {:x 9, :y -7.405122084980102})} {:name \"7d59a97f-c141-45e9-8e93-ce59e87df8a7\", :values ({:x 0, :y -1.1444165152109953} {:x 1, :y -2.2374564266438} {:x 2, :y -3.078896562669847} {:x 3, :y -2.7746752730618605} {:x 4, :y -3.3150182542785194} {:x 5, :y -4.099493724405811} {:x 6, :y -4.305296571810868} {:x 7, :y -5.062640222044679} {:x 8, :y -7.054637019727089} {:x 9, :y -6.7330331019320795})} {:name \"c70de99f-ae5b-4cf0-8cdb-7a914b8c8ff4\", :values ({:x 0, :y -0.1779826471986885} {:x 1, :y -2.1375727863254808} {:x 2, :y -2.889582297083468} {:x 3, :y -3.986045264741625} {:x 4, :y -5.015607483874858} {:x 5, :y -4.773820428063763} {:x 6, :y -6.089576695846606} {:x 7, :y -6.114816803298435} {:x 8, :y -6.571831508615672} {:x 9, :y -6.43756100251909})} {:name \"f3368055-1fbd-48db-9080-56479728c71f\", :values ({:x 0, :y -0.9215599018644767} {:x 1, :y -1.5969930701371382} {:x 2, :y -1.2984209298055642} {:x 3, :y -2.6409759862453708} {:x 4, :y -4.217114779821871} {:x 5, :y -4.176155358412092} {:x 6, :y -4.02457066760655} {:x 7, :y -5.076831047501395} {:x 8, :y -5.417578008400817} {:x 9, :y -7.1914315628997345})}), :marks ({:type \"line\", :from {:data \"0c8e2d2f-ad74-45d1-a199-26a975af01be\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :stroke {:value \"blue\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}} {:type \"line\", :from {:data \"23b99dc2-019f-488b-bd5b-cc27a9a39993\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :stroke {:value \"pink\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}} {:type \"line\", :from {:data \"4e779c91-80ff-4fc5-bf77-4a7746c24f1f\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :stroke {:value \"pink\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}} {:type \"line\", :from {:data \"7d59a97f-c141-45e9-8e93-ce59e87df8a7\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :stroke {:value \"pink\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}} {:type \"line\", :from {:data \"c70de99f-ae5b-4cf0-8cdb-7a914b8c8ff4\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :stroke {:value \"pink\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}} {:type \"line\", :from {:data \"f3368055-1fbd-48db-9080-56479728c71f\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :stroke {:value \"pink\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}})}}"}],"value":"[#'degeneracy/best,#gorilla_repl.vega.VegaView{:content {:width 400, :height 247.2188, :padding {:top 10, :left 55, :bottom 40, :right 10}, :scales [{:name \"x\", :type \"linear\", :range \"width\", :zero false, :domain [0 9]} {:name \"y\", :type \"linear\", :range \"height\", :nice true, :zero false, :domain {:data \"0c8e2d2f-ad74-45d1-a199-26a975af01be\", :field \"data.y\"}}], :axes [{:type \"x\", :scale \"x\"} {:type \"y\", :scale \"y\"}], :data ({:name \"0c8e2d2f-ad74-45d1-a199-26a975af01be\", :values ({:x 0, :y -0.39901273345316834} {:x 1, :y -1.754862237200335} {:x 2, :y -1.2299846485415333} {:x 3, :y -2.9735084892368135} {:x 4, :y -3.9381959046328765} {:x 5, :y -4.078505261588908} {:x 6, :y -5.175221781063404} {:x 7, :y -6.370083609952889} {:x 8, :y -7.411701030389484} {:x 9, :y -6.8566537652128545})} {:name \"23b99dc2-019f-488b-bd5b-cc27a9a39993\", :values ({:x 0, :y -0.7278883302739594} {:x 1, :y -2.0371885338510802} {:x 2, :y -2.3921991508572793} {:x 3, :y -2.0348883702998712} {:x 4, :y -3.4162230638105395} {:x 5, :y -2.7489840526197504} {:x 6, :y -3.991756208230428} {:x 7, :y -5.948424459380587} {:x 8, :y -7.563256715337136} {:x 9, :y -7.359257985555489})} {:name \"4e779c91-80ff-4fc5-bf77-4a7746c24f1f\", :values ({:x 0, :y -0.8624537663906322} {:x 1, :y -1.891703628969677} {:x 2, :y -3.5960984831321845} {:x 3, :y -3.065887983292625} {:x 4, :y -4.293568622966322} {:x 5, :y -4.270131377266619} {:x 6, :y -5.3073515059591925} {:x 7, :y -6.745491316129961} {:x 8, :y -7.182448891553571} {:x 9, :y -7.405122084980102})} {:name \"7d59a97f-c141-45e9-8e93-ce59e87df8a7\", :values ({:x 0, :y -1.1444165152109953} {:x 1, :y -2.2374564266438} {:x 2, :y -3.078896562669847} {:x 3, :y -2.7746752730618605} {:x 4, :y -3.3150182542785194} {:x 5, :y -4.099493724405811} {:x 6, :y -4.305296571810868} {:x 7, :y -5.062640222044679} {:x 8, :y -7.054637019727089} {:x 9, :y -6.7330331019320795})} {:name \"c70de99f-ae5b-4cf0-8cdb-7a914b8c8ff4\", :values ({:x 0, :y -0.1779826471986885} {:x 1, :y -2.1375727863254808} {:x 2, :y -2.889582297083468} {:x 3, :y -3.986045264741625} {:x 4, :y -5.015607483874858} {:x 5, :y -4.773820428063763} {:x 6, :y -6.089576695846606} {:x 7, :y -6.114816803298435} {:x 8, :y -6.571831508615672} {:x 9, :y -6.43756100251909})} {:name \"f3368055-1fbd-48db-9080-56479728c71f\", :values ({:x 0, :y -0.9215599018644767} {:x 1, :y -1.5969930701371382} {:x 2, :y -1.2984209298055642} {:x 3, :y -2.6409759862453708} {:x 4, :y -4.217114779821871} {:x 5, :y -4.176155358412092} {:x 6, :y -4.02457066760655} {:x 7, :y -5.076831047501395} {:x 8, :y -5.417578008400817} {:x 9, :y -7.1914315628997345})}), :marks ({:type \"line\", :from {:data \"0c8e2d2f-ad74-45d1-a199-26a975af01be\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :stroke {:value \"blue\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}} {:type \"line\", :from {:data \"23b99dc2-019f-488b-bd5b-cc27a9a39993\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :stroke {:value \"pink\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}} {:type \"line\", :from {:data \"4e779c91-80ff-4fc5-bf77-4a7746c24f1f\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :stroke {:value \"pink\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}} {:type \"line\", :from {:data \"7d59a97f-c141-45e9-8e93-ce59e87df8a7\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :stroke {:value \"pink\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}} {:type \"line\", :from {:data \"c70de99f-ae5b-4cf0-8cdb-7a914b8c8ff4\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :stroke {:value \"pink\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}} {:type \"line\", :from {:data \"f3368055-1fbd-48db-9080-56479728c71f\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :stroke {:value \"pink\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}})}}]"}
;; <=

;; **
;;; We can see that even the absolute best sampled paths aren't actually all that close to the true path. And most of the paths are significantly worse than this: the histogram of the maximum distance between the obser
;; **

;; **
;;; We can see that even the absolute best sampled paths aren't actually all that close to the true path. Without even having to compute the true posterior distribution, we know that our importance-sampling problem has completely failed to perform inference in this problem. Why has this happened?
;;; 
;;; Well, the reason is exactly what we went through before. If we sample paths from our uniform random walk at random, the chance of getting two paths that are close to each other is vanishingly small. And in the inference problem we set up, the only solution is for us to sample a path that is close to our path of observations. By applying the 68-95-99.7 rule of normal distributions - that 68% of the probability mass of a normal distribution falls within one standard deviation, 95% falls within two, and 99.7% falls within three - we can see approximately just how unlikely this is. Because our observation distribution has a standard deviation of 1/3, every path that diverges more than 1 away from the path of our observations at any point will be assigned essentially negligible probability. And as we showed earlier, the fraction of paths that never diverge from our chosen path of observations is on the order of 0.1% of all paths.
;;; 
;;; It is for this reason that the vast majority of our samples are useless. Using importance sampling to solve this inference problem essentially boils down to randomly sampling from the uniform random walk, and throwing away our sample unless it just so happens to track almost-perfectly the specified sequence of observations. That almost never happens - as we said, it happens on the order of one in a thousand times - which means that around 99.9% of our samples are complete wastes.
;;; 
;;; What we have discussed here is a general problem with the importance-sampling algorithm. When applied to problems of high dimension, the vast majority of samples are often useless - assigned probability so low that they cannot be used to approximate the posterior. In sufficiently complex problems, only a vanishingly small percentage of samples from the prior will be good enough to tell us anything about the posterior distribution.
;;; 
;;; The simplest solution to this problem, and one that works extremely well for the case we have discussed here, is to use sequential Monte Carlo (SMC) rather than importance sampling. We will discuss how sequential Monte Carlo works in the next worksheet; for now, notice merely *that* it works - and well.
;;; 
;;; We perform sequential Monte Carlo on the previous query, and compare the five **lowest-probability** estimations of the path, in green, to the true path, in blue:
;;; 
;; **

;; @@
(def S 1000)

(def smc-results
  (take S
        (doquery :smc uniform-rw-obs [path] :number-of-particles S)))

(def worst (map :result (take-last 5 
                                   (sort-by :log-weight > smc-results))))

(apply plot/compose 
       (conj 
         (map
           #(plot/list-plot % :joined :true :plot-range [[0 (- T 1)] :all] :color "red")
           worst)
         (plot/list-plot path :joined :true :plot-range [[0 (- T 1)] :all] :color "blue")))
;; @@
;; =>
;;; {"type":"list-like","open":"","close":"","separator":"</pre><pre>","items":[{"type":"list-like","open":"","close":"","separator":"</pre><pre>","items":[{"type":"list-like","open":"","close":"","separator":"</pre><pre>","items":[{"type":"html","content":"<span class='clj-var'>#&#x27;degeneracy/S</span>","value":"#'degeneracy/S"},{"type":"html","content":"<span class='clj-var'>#&#x27;degeneracy/smc-results</span>","value":"#'degeneracy/smc-results"}],"value":"[#'degeneracy/S,#'degeneracy/smc-results]"},{"type":"html","content":"<span class='clj-var'>#&#x27;degeneracy/worst</span>","value":"#'degeneracy/worst"}],"value":"[[#'degeneracy/S,#'degeneracy/smc-results],#'degeneracy/worst]"},{"type":"vega","content":{"width":400,"height":247.2187957763672,"padding":{"top":10,"left":55,"bottom":40,"right":10},"scales":[{"name":"x","type":"linear","range":"width","zero":false,"domain":[0,9]},{"name":"y","type":"linear","range":"height","nice":true,"zero":false,"domain":{"data":"511ec86e-7361-4c6c-be9d-205856d3b6bd","field":"data.y"}}],"axes":[{"type":"x","scale":"x"},{"type":"y","scale":"y"}],"data":[{"name":"511ec86e-7361-4c6c-be9d-205856d3b6bd","values":[{"x":0,"y":-0.39901273345316834},{"x":1,"y":-1.754862237200335},{"x":2,"y":-1.2299846485415333},{"x":3,"y":-2.9735084892368135},{"x":4,"y":-3.9381959046328765},{"x":5,"y":-4.078505261588908},{"x":6,"y":-5.175221781063404},{"x":7,"y":-6.370083609952889},{"x":8,"y":-7.411701030389484},{"x":9,"y":-6.8566537652128545}]},{"name":"6cfeea25-ad4d-4f16-bbc1-b0da9687c338","values":[{"x":0,"y":0.043325021199762226},{"x":1,"y":-1.8343866762697445},{"x":2,"y":-1.8592908411053797},{"x":3,"y":-2.9651219278718735},{"x":4,"y":-3.9125118615706107},{"x":5,"y":-4.887648593373492},{"x":6,"y":-4.978995152326299},{"x":7,"y":-6.246898013342985},{"x":8,"y":-7.403951210568918},{"x":9,"y":-6.6043086750626046}]},{"name":"c87d2c9b-d7e4-4e9f-a494-f477a29640d7","values":[{"x":0,"y":0.043325021199762226},{"x":1,"y":-1.8343866762697445},{"x":2,"y":-1.8592908411053797},{"x":3,"y":-2.9651219278718735},{"x":4,"y":-3.9125118615706107},{"x":5,"y":-4.887648593373492},{"x":6,"y":-4.978995152326299},{"x":7,"y":-6.246898013342985},{"x":8,"y":-7.403951210568918},{"x":9,"y":-6.6043086750626046}]},{"name":"edcc26c1-aa3d-40d1-b5e6-4d33719eb466","values":[{"x":0,"y":-0.3734910952618087},{"x":1,"y":-1.3919030909376664},{"x":2,"y":-1.5279676855696849},{"x":3,"y":-3.1526178753781515},{"x":4,"y":-4.012875458872196},{"x":5,"y":-3.7598016345055782},{"x":6,"y":-5.469345414841098},{"x":7,"y":-6.459263572275311},{"x":8,"y":-7.096456835882096},{"x":9,"y":-6.272223421808538}]},{"name":"be47ab63-b3a5-46e7-959e-5daaef22f60c","values":[{"x":0,"y":-0.3734910952618087},{"x":1,"y":-1.3919030909376664},{"x":2,"y":-1.5279676855696849},{"x":3,"y":-3.1526178753781515},{"x":4,"y":-3.95499011250298},{"x":5,"y":-4.4742968625582185},{"x":6,"y":-5.560859323303707},{"x":7,"y":-5.961191140257539},{"x":8,"y":-7.6639737758134086},{"x":9,"y":-7.152907693967717}]},{"name":"76533ee8-1e2e-4b0e-8a32-46252cc37442","values":[{"x":0,"y":-0.3734910952618087},{"x":1,"y":-1.3919030909376664},{"x":2,"y":-1.5279676855696849},{"x":3,"y":-3.1526178753781515},{"x":4,"y":-3.95499011250298},{"x":5,"y":-4.4742968625582185},{"x":6,"y":-5.560859323303707},{"x":7,"y":-5.961191140257539},{"x":8,"y":-7.6639737758134086},{"x":9,"y":-7.152907693967717}]}],"marks":[{"type":"line","from":{"data":"511ec86e-7361-4c6c-be9d-205856d3b6bd"},"properties":{"enter":{"x":{"scale":"x","field":"data.x"},"y":{"scale":"y","field":"data.y"},"stroke":{"value":"blue"},"strokeWidth":{"value":2},"strokeOpacity":{"value":1}}}},{"type":"line","from":{"data":"6cfeea25-ad4d-4f16-bbc1-b0da9687c338"},"properties":{"enter":{"x":{"scale":"x","field":"data.x"},"y":{"scale":"y","field":"data.y"},"stroke":{"value":"red"},"strokeWidth":{"value":2},"strokeOpacity":{"value":1}}}},{"type":"line","from":{"data":"c87d2c9b-d7e4-4e9f-a494-f477a29640d7"},"properties":{"enter":{"x":{"scale":"x","field":"data.x"},"y":{"scale":"y","field":"data.y"},"stroke":{"value":"red"},"strokeWidth":{"value":2},"strokeOpacity":{"value":1}}}},{"type":"line","from":{"data":"edcc26c1-aa3d-40d1-b5e6-4d33719eb466"},"properties":{"enter":{"x":{"scale":"x","field":"data.x"},"y":{"scale":"y","field":"data.y"},"stroke":{"value":"red"},"strokeWidth":{"value":2},"strokeOpacity":{"value":1}}}},{"type":"line","from":{"data":"be47ab63-b3a5-46e7-959e-5daaef22f60c"},"properties":{"enter":{"x":{"scale":"x","field":"data.x"},"y":{"scale":"y","field":"data.y"},"stroke":{"value":"red"},"strokeWidth":{"value":2},"strokeOpacity":{"value":1}}}},{"type":"line","from":{"data":"76533ee8-1e2e-4b0e-8a32-46252cc37442"},"properties":{"enter":{"x":{"scale":"x","field":"data.x"},"y":{"scale":"y","field":"data.y"},"stroke":{"value":"red"},"strokeWidth":{"value":2},"strokeOpacity":{"value":1}}}}]},"value":"#gorilla_repl.vega.VegaView{:content {:width 400, :height 247.2188, :padding {:top 10, :left 55, :bottom 40, :right 10}, :scales [{:name \"x\", :type \"linear\", :range \"width\", :zero false, :domain [0 9]} {:name \"y\", :type \"linear\", :range \"height\", :nice true, :zero false, :domain {:data \"511ec86e-7361-4c6c-be9d-205856d3b6bd\", :field \"data.y\"}}], :axes [{:type \"x\", :scale \"x\"} {:type \"y\", :scale \"y\"}], :data ({:name \"511ec86e-7361-4c6c-be9d-205856d3b6bd\", :values ({:x 0, :y -0.39901273345316834} {:x 1, :y -1.754862237200335} {:x 2, :y -1.2299846485415333} {:x 3, :y -2.9735084892368135} {:x 4, :y -3.9381959046328765} {:x 5, :y -4.078505261588908} {:x 6, :y -5.175221781063404} {:x 7, :y -6.370083609952889} {:x 8, :y -7.411701030389484} {:x 9, :y -6.8566537652128545})} {:name \"6cfeea25-ad4d-4f16-bbc1-b0da9687c338\", :values ({:x 0, :y 0.043325021199762226} {:x 1, :y -1.8343866762697445} {:x 2, :y -1.8592908411053797} {:x 3, :y -2.9651219278718735} {:x 4, :y -3.9125118615706107} {:x 5, :y -4.887648593373492} {:x 6, :y -4.978995152326299} {:x 7, :y -6.246898013342985} {:x 8, :y -7.403951210568918} {:x 9, :y -6.6043086750626046})} {:name \"c87d2c9b-d7e4-4e9f-a494-f477a29640d7\", :values ({:x 0, :y 0.043325021199762226} {:x 1, :y -1.8343866762697445} {:x 2, :y -1.8592908411053797} {:x 3, :y -2.9651219278718735} {:x 4, :y -3.9125118615706107} {:x 5, :y -4.887648593373492} {:x 6, :y -4.978995152326299} {:x 7, :y -6.246898013342985} {:x 8, :y -7.403951210568918} {:x 9, :y -6.6043086750626046})} {:name \"edcc26c1-aa3d-40d1-b5e6-4d33719eb466\", :values ({:x 0, :y -0.3734910952618087} {:x 1, :y -1.3919030909376664} {:x 2, :y -1.5279676855696849} {:x 3, :y -3.1526178753781515} {:x 4, :y -4.012875458872196} {:x 5, :y -3.7598016345055782} {:x 6, :y -5.469345414841098} {:x 7, :y -6.459263572275311} {:x 8, :y -7.096456835882096} {:x 9, :y -6.272223421808538})} {:name \"be47ab63-b3a5-46e7-959e-5daaef22f60c\", :values ({:x 0, :y -0.3734910952618087} {:x 1, :y -1.3919030909376664} {:x 2, :y -1.5279676855696849} {:x 3, :y -3.1526178753781515} {:x 4, :y -3.95499011250298} {:x 5, :y -4.4742968625582185} {:x 6, :y -5.560859323303707} {:x 7, :y -5.961191140257539} {:x 8, :y -7.6639737758134086} {:x 9, :y -7.152907693967717})} {:name \"76533ee8-1e2e-4b0e-8a32-46252cc37442\", :values ({:x 0, :y -0.3734910952618087} {:x 1, :y -1.3919030909376664} {:x 2, :y -1.5279676855696849} {:x 3, :y -3.1526178753781515} {:x 4, :y -3.95499011250298} {:x 5, :y -4.4742968625582185} {:x 6, :y -5.560859323303707} {:x 7, :y -5.961191140257539} {:x 8, :y -7.6639737758134086} {:x 9, :y -7.152907693967717})}), :marks ({:type \"line\", :from {:data \"511ec86e-7361-4c6c-be9d-205856d3b6bd\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :stroke {:value \"blue\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}} {:type \"line\", :from {:data \"6cfeea25-ad4d-4f16-bbc1-b0da9687c338\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :stroke {:value \"red\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}} {:type \"line\", :from {:data \"c87d2c9b-d7e4-4e9f-a494-f477a29640d7\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :stroke {:value \"red\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}} {:type \"line\", :from {:data \"edcc26c1-aa3d-40d1-b5e6-4d33719eb466\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :stroke {:value \"red\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}} {:type \"line\", :from {:data \"be47ab63-b3a5-46e7-959e-5daaef22f60c\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :stroke {:value \"red\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}} {:type \"line\", :from {:data \"76533ee8-1e2e-4b0e-8a32-46252cc37442\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :stroke {:value \"red\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}})}}"}],"value":"[[[#'degeneracy/S,#'degeneracy/smc-results],#'degeneracy/worst],#gorilla_repl.vega.VegaView{:content {:width 400, :height 247.2188, :padding {:top 10, :left 55, :bottom 40, :right 10}, :scales [{:name \"x\", :type \"linear\", :range \"width\", :zero false, :domain [0 9]} {:name \"y\", :type \"linear\", :range \"height\", :nice true, :zero false, :domain {:data \"511ec86e-7361-4c6c-be9d-205856d3b6bd\", :field \"data.y\"}}], :axes [{:type \"x\", :scale \"x\"} {:type \"y\", :scale \"y\"}], :data ({:name \"511ec86e-7361-4c6c-be9d-205856d3b6bd\", :values ({:x 0, :y -0.39901273345316834} {:x 1, :y -1.754862237200335} {:x 2, :y -1.2299846485415333} {:x 3, :y -2.9735084892368135} {:x 4, :y -3.9381959046328765} {:x 5, :y -4.078505261588908} {:x 6, :y -5.175221781063404} {:x 7, :y -6.370083609952889} {:x 8, :y -7.411701030389484} {:x 9, :y -6.8566537652128545})} {:name \"6cfeea25-ad4d-4f16-bbc1-b0da9687c338\", :values ({:x 0, :y 0.043325021199762226} {:x 1, :y -1.8343866762697445} {:x 2, :y -1.8592908411053797} {:x 3, :y -2.9651219278718735} {:x 4, :y -3.9125118615706107} {:x 5, :y -4.887648593373492} {:x 6, :y -4.978995152326299} {:x 7, :y -6.246898013342985} {:x 8, :y -7.403951210568918} {:x 9, :y -6.6043086750626046})} {:name \"c87d2c9b-d7e4-4e9f-a494-f477a29640d7\", :values ({:x 0, :y 0.043325021199762226} {:x 1, :y -1.8343866762697445} {:x 2, :y -1.8592908411053797} {:x 3, :y -2.9651219278718735} {:x 4, :y -3.9125118615706107} {:x 5, :y -4.887648593373492} {:x 6, :y -4.978995152326299} {:x 7, :y -6.246898013342985} {:x 8, :y -7.403951210568918} {:x 9, :y -6.6043086750626046})} {:name \"edcc26c1-aa3d-40d1-b5e6-4d33719eb466\", :values ({:x 0, :y -0.3734910952618087} {:x 1, :y -1.3919030909376664} {:x 2, :y -1.5279676855696849} {:x 3, :y -3.1526178753781515} {:x 4, :y -4.012875458872196} {:x 5, :y -3.7598016345055782} {:x 6, :y -5.469345414841098} {:x 7, :y -6.459263572275311} {:x 8, :y -7.096456835882096} {:x 9, :y -6.272223421808538})} {:name \"be47ab63-b3a5-46e7-959e-5daaef22f60c\", :values ({:x 0, :y -0.3734910952618087} {:x 1, :y -1.3919030909376664} {:x 2, :y -1.5279676855696849} {:x 3, :y -3.1526178753781515} {:x 4, :y -3.95499011250298} {:x 5, :y -4.4742968625582185} {:x 6, :y -5.560859323303707} {:x 7, :y -5.961191140257539} {:x 8, :y -7.6639737758134086} {:x 9, :y -7.152907693967717})} {:name \"76533ee8-1e2e-4b0e-8a32-46252cc37442\", :values ({:x 0, :y -0.3734910952618087} {:x 1, :y -1.3919030909376664} {:x 2, :y -1.5279676855696849} {:x 3, :y -3.1526178753781515} {:x 4, :y -3.95499011250298} {:x 5, :y -4.4742968625582185} {:x 6, :y -5.560859323303707} {:x 7, :y -5.961191140257539} {:x 8, :y -7.6639737758134086} {:x 9, :y -7.152907693967717})}), :marks ({:type \"line\", :from {:data \"511ec86e-7361-4c6c-be9d-205856d3b6bd\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :stroke {:value \"blue\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}} {:type \"line\", :from {:data \"6cfeea25-ad4d-4f16-bbc1-b0da9687c338\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :stroke {:value \"red\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}} {:type \"line\", :from {:data \"c87d2c9b-d7e4-4e9f-a494-f477a29640d7\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :stroke {:value \"red\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}} {:type \"line\", :from {:data \"edcc26c1-aa3d-40d1-b5e6-4d33719eb466\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :stroke {:value \"red\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}} {:type \"line\", :from {:data \"be47ab63-b3a5-46e7-959e-5daaef22f60c\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :stroke {:value \"red\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}} {:type \"line\", :from {:data \"76533ee8-1e2e-4b0e-8a32-46252cc37442\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :stroke {:value \"red\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}})}}]"}
;; <=

;; **
;;; Night and day, isn't it? More on this next time.
;; **
